<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
<HEAD>
  <META name="generator" content="HTML Tidy for Linux/x86 (vers 31 October 2006), see www.w3.org">

  <TITLE>Compute Local Geodetic Coordinates</TITLE>
</HEAD>

<BODY>
  <SCRIPT language="JavaScript" type="text/javascript">
function lat_dms(latitude)
  {    
    var lat = latitude;
    var sign = "N";
    if( lat < 0 )
    {
      lat = -lat;
      sign = "S";
    }
    var d = Math.floor(lat);
    var m = Math.floor((lat-d)*60.0);
    var s = (lat-d-m/60.0)*3600.0;
    var dmsv;
    if( d < 10 )
    {
      if( m < 10 )
      {
        dmsv = sign + " 0" + d.toString() + "\xB0 0" + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
      else
      {
        dmsv = sign + " 0" + d.toString() + "\xB0 " + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
    }
    else
    {
      if( m < 10 )
      {
        dmsv = sign + " " + d.toString() + "\xB0 0" + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
      else
      {
        dmsv = sign + " " + d.toString() + "\xB0 " + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
    }
    return dmsv;
    document.nev.ref_lat_dms.value = dmsv;
  }
  function get_ref_lat_dms()
  {
    var latitude = document.nev.ref_lat.value;
    document.nev.ref_lat_dms.value = lat_dms(latitude);
  }
  function get_user_lat_dms()
  {
    var latitude = document.nev.user_lat.value;
    document.nev.user_lat_dms.value = lat_dms(latitude);
  }
  function lon_dms(longitude)
  { 
    var lon = longitude;
    var sign = "E";
    if( lon < 0 )
    {
      lon = -lon;
      sign = "W";
    }
    var d = Math.floor(lon);
    var m = Math.floor((lon-d)*60.0);
    var s = (lon-d-m/60.0)*3600.0;
    var dmsv;
    if( d < 10 )
    {
      if( m < 10 )
      {
        dmsv = sign + " 0" + d.toString() + "\xB0 0" + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
      else
      {
        dmsv = sign + " 0" + d.toString() + "\xB0 " + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
    }
    else
    {
      if( m < 10 )
      {
        dmsv = sign + " " + d.toString() + "\xB0 0" + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
      else
      {
        dmsv = sign + " " + d.toString() + "\xB0 " + m.toString() + "' " + s.toFixed(6).toString() +"\"";
      }
    }
    return dmsv;
  }
  function get_ref_lon_dms()
  {
    var longitude = document.nev.ref_lon.value;
    document.nev.ref_lon_dms.value = lon_dms(longitude);
  }
  function get_user_lon_dms()
  {
    var longitude = document.nev.user_lon.value;
    document.nev.user_lon_dms.value = lon_dms(longitude);
  }
  </SCRIPT>

  <H1>Compute Local Geodetic Coordinates from two Geodetic Coordinates</H1>
  
  by: Glenn D. MacGougan, Uses the project /apps/geodesy. The executable is /bin/geodesy.exe or /bin/geodesy.bin.
  
  <h2>Computes Northing Easting and Vertical with respect to the first point (Assuming WGS84).</h2>
  <BR>  
  <BR>
  Reference Coordinates<BR>

  <FORM name="nev" action="https://okeefesrv.geomatics.ucalgary.ca/cgi-bin/compute_nev.pl" method="post" id="nev">
    <TABLE width="800" border="1" cellpadding="5" align="left" summary="The reference point coordinates.">
      <TBODY>
        <TR>
          <TD><EM>Reference latitude (&deg;)</EM></TD>

          <TD><INPUT type="text" name="ref_lat" onkeypress="get_ref_lat_dms();" onkeyup="get_ref_lat_dms();" value="0"></TD>

          <TD><INPUT type="text" name="ref_lat_dms" value="N 00 00 00.000000"></TD>
        </TR>

        <TR>
          <TD><EM>Reference longitude (&deg;)</EM></TD>

          <TD><INPUT type="text" name="ref_lon" onkeypress="get_ref_lon_dms();" onkeyup="get_ref_lon_dms();" value="0"></TD>

          <TD><INPUT type="text" name="ref_lon_dms" value="E 0 00 00.000000"></TD>
        </TR>

        <TR>
          <TD><EM>Reference height (m)</EM></TD>

          <TD><INPUT type="text" name="ref_hgt" value="0"></TD>

          <TD>&nbsp;</TD>
        </TR>
      </TBODY>
    </TABLE><BR>
    <BR>
    <BR>
    <BR>
    <BR>
    <BR>
    User Coordinates

    <TABLE width="800" border="1" cellpadding="5" align="left" summary="The user coordinates.">
      <TBODY>
        <TR>
          <TD><EM>latitude (&deg;)</EM></TD>

          <TD><INPUT type="text" name="user_lat" onkeypress="get_user_lat_dms();" onkeyup="get_user_lat_dms();" value="0"></TD>

          <TD><INPUT type="text" name="user_lat_dms" value="N 00 00 00.000000"></TD>
        </TR>

        <TR>
          <TD><EM>longitude (&deg;)</EM></TD>

          <TD><INPUT type="text" name="user_lon" onkeypress="get_user_lon_dms();" onkeyup="get_user_lon_dms();" value="0"></TD>

          <TD><INPUT type="text" name="user_lon_dms" value="W 00 00 00.000000"></TD>
        </TR>

        <TR>
          <TD><EM>height (m)</EM></TD>

          <TD><INPUT type="text" name="user_hgt" value="0"></TD>

          <TD>&nbsp;</TD>
        </TR>
      </TBODY>
    </TABLE><BR>
    <BR>
    <BR>
    <BR>
    <BR>
    <BR>
    <BR>
    <BR>
    <INPUT value="Compute" name="get_nev" type="submit"><BR>
    <BR>
    Northing, Easting, Vertical

    <TABLE width="800" border="1" cellpadding="5" align="left" summary="The relative coordinates.">
      <TBODY>
        <TR>
          <TD><EM>Northing (m)</EM></TD>

          <TD><INPUT type="text" name="northing" value="0"></TD>
        </TR>

        <TR>
          <TD><EM>Easting (m)</EM></TD>

          <TD><INPUT type="text" name="easting" value="0"></TD>
        </TR>

        <TR>
          <TD><EM>Vertical (m)</EM></TD>

          <TD><INPUT type="text" name="vertical" value="0"></TD>
        </TR>
      </TBODY>
    </TABLE>
  </FORM>
</BODY>
</HTML>