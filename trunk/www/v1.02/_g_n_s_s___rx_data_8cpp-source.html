<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>The Essential GNSS Project: GNSS_RxData.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul>
</div>
<h1>GNSS_RxData.cpp</h1><a href="_g_n_s_s___rx_data_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment">\file    GNSS_RxData.cpp</span>
<a name="l00003"></a>00003 <span class="comment">\brief   The implementation file for the GNSS_RxData class.</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">\author  Glenn D. MacGougan (GDM)</span>
<a name="l00006"></a>00006 <span class="comment">\date    2007-11-29</span>
<a name="l00007"></a>00007 <span class="comment">\since   2006-11-13</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">\b "LICENSE INFORMATION" \n</span>
<a name="l00010"></a>00010 <span class="comment">Copyright (c) 2007, refer to 'author' doxygen tags \n</span>
<a name="l00011"></a>00011 <span class="comment">All rights reserved. \n</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">Redistribution and use in source and binary forms, with or without</span>
<a name="l00014"></a>00014 <span class="comment">modification, are permitted provided the following conditions are met: \n</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">- Redistributions of source code must retain the above copyright</span>
<a name="l00017"></a>00017 <span class="comment">  notice, this list of conditions and the following disclaimer. \n</span>
<a name="l00018"></a>00018 <span class="comment">- Redistributions in binary form must reproduce the above copyright</span>
<a name="l00019"></a>00019 <span class="comment">  notice, this list of conditions and the following disclaimer in the</span>
<a name="l00020"></a>00020 <span class="comment">  documentation and/or other materials provided with the distribution. \n</span>
<a name="l00021"></a>00021 <span class="comment">- The name(s) of the contributor(s) may not be used to endorse or promote </span>
<a name="l00022"></a>00022 <span class="comment">  products derived from this software without specific prior written </span>
<a name="l00023"></a>00023 <span class="comment">  permission. \n</span>
<a name="l00024"></a>00024 <span class="comment"></span>
<a name="l00025"></a>00025 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE CONTRIBUTORS ``AS IS'' AND ANY EXPRESS </span>
<a name="l00026"></a>00026 <span class="comment">OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED </span>
<a name="l00027"></a>00027 <span class="comment">WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
<a name="l00028"></a>00028 <span class="comment">DISCLAIMED. IN NO EVENT SHALL THE CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span>
<a name="l00029"></a>00029 <span class="comment">INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
<a name="l00030"></a>00030 <span class="comment">(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR </span>
<a name="l00031"></a>00031 <span class="comment">SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER </span>
<a name="l00032"></a>00032 <span class="comment">CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT </span>
<a name="l00033"></a>00033 <span class="comment">LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY </span>
<a name="l00034"></a>00034 <span class="comment">OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF </span>
<a name="l00035"></a>00035 <span class="comment">SUCH DAMAGE.</span>
<a name="l00036"></a>00036 <span class="comment">*/</span>
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;memory.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include "<a class="code" href="_g_n_s_s___rx_data_8h.html" title="The header file for the GNSS_RxData class.">GNSS_RxData.h</a>"</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include "<a class="code" href="novatel_8h.html" title="GNSS core &amp;#39;c&amp;#39; function library: decoding/encoding NovAtel data.">novatel.h</a>"</span> 
<a name="l00043"></a>00043 <span class="preprocessor">#include "<a class="code" href="constants_8h.html" title="GNSS core &amp;#39;c&amp;#39; function library: Contains constants.">constants.h</a>"</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include "<a class="code" href="geodesy_8h.html" title="GNSS core &amp;#39;c&amp;#39; function library: geodesy related functions.">geodesy.h</a>"</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include "<a class="code" href="_matrix_8h.html" title="The Zenautics Matrix Class.">Matrix.h</a>"</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">using namespace </span>Zenautics; <span class="comment">// for Matrix</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#define GPS_NUMBER_VALID_PRNS (64)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="preprocessor">#ifndef SECONDS_IN_DAY</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define SECONDS_IN_DAY (86400.0)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="preprocessor">#ifndef SECONDS_IN_WEEK</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define SECONDS_IN_WEEK (604800.0)</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="preprocessor">#ifndef WIN32</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#define _CRT_SECURE_NO_DEPRECATE</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">namespace </span>GNSS
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068 
<a name="l00069"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5e44986ca3e12309d89830e9ef278d2d">00069</a>   <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5e44986ca3e12309d89830e9ef278d2d" title="The default constructor (no data allocated yet).">GPS_BroadcastEphemerisAndAlmanacArray::GPS_BroadcastEphemerisAndAlmanacArray</a>()
<a name="l00070"></a>00070   : m_array(NULL),
<a name="l00071"></a>00071     m_arrayLength(0)
<a name="l00072"></a>00072   { 
<a name="l00073"></a>00073   }
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e4b519dc36a7106f5732e66fccf70b9a">00076</a>   GPS_BroadcastEphemerisAndAlmanacArray::~GPS_BroadcastEphemerisAndAlmanacArray()
<a name="l00077"></a>00077   {
<a name="l00078"></a>00078     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a> != NULL )
<a name="l00079"></a>00079     {
<a name="l00080"></a>00080       <span class="keyword">delete</span>[] <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>;
<a name="l00081"></a>00081       <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> = 0;
<a name="l00082"></a>00082     }
<a name="l00083"></a>00083   }
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e97fa93acc56afa64ac674c9f43eb5e4">00085</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e97fa93acc56afa64ac674c9f43eb5e4" title="Allocate the array.">GPS_BroadcastEphemerisAndAlmanacArray::AllocateArray</a>()
<a name="l00086"></a>00086   {
<a name="l00087"></a>00087     <span class="keywordtype">unsigned</span> i = 0;
<a name="l00088"></a>00088     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a> != NULL )
<a name="l00089"></a>00089     {
<a name="l00090"></a>00090       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == GPS_NUMBER_VALID_PRNS )
<a name="l00091"></a>00091         <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// already allocated</span>
<a name="l00092"></a>00092       <span class="keywordflow">else</span>
<a name="l00093"></a>00093         <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// error</span>
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095     <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a> = <span class="keyword">new</span> GPS_structOrbitParameters[GPS_NUMBER_VALID_PRNS];
<a name="l00096"></a>00096     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a> == NULL )
<a name="l00097"></a>00097       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00098"></a>00098     <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> = GPS_NUMBER_VALID_PRNS;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="comment">// Initialize all to zero.</span>
<a name="l00101"></a>00101     <span class="keywordflow">for</span>( i = 0; i &lt; GPS_NUMBER_VALID_PRNS; i++ )
<a name="l00102"></a>00102     {
<a name="l00103"></a>00103       memset( &amp;<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[i], 0, <span class="keyword">sizeof</span>(GPS_structOrbitParameters) );
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00107"></a>00107   }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0">00110</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0" title="Add an ephemeris structure.">GPS_BroadcastEphemerisAndAlmanacArray::AddEphemeris</a>( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="keyword">const</span> <a class="code" href="struct_g_p_s__struct_ephemeris.html" title="A set of satellite orbit parameters that is used to calculate GPS satellite positions...">GPS_structEphemeris</a> &amp;eph )
<a name="l00111"></a>00111   {
<a name="l00112"></a>00112     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index = 0;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == 0 )
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116       <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e97fa93acc56afa64ac674c9f43eb5e4" title="Allocate the array.">AllocateArray</a>() )
<a name="l00117"></a>00117         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GetIndexGivenPRN</a>( prn, index ) )
<a name="l00121"></a>00121       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00122"></a>00122 
<a name="l00123"></a>00123     <span class="comment">// The previous ephemeris is set based on what was the current prior this update.</span>
<a name="l00124"></a>00124     <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].previousEph = <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph;
<a name="l00125"></a>00125     <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph  = eph;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00128"></a>00128   }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#2668e71beb5480f4b6c74cca11ea7900">00130</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#2668e71beb5480f4b6c74cca11ea7900" title="Add an almanac structure.">GPS_BroadcastEphemerisAndAlmanacArray::AddAlmanac</a>( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="keyword">const</span> <a class="code" href="struct_g_p_s__struct_almanac.html" title="A limited set of satellite orbit parameters that is used to calculate rough GPS satellite...">GPS_structAlmanac</a> &amp;alm )
<a name="l00131"></a>00131   {
<a name="l00132"></a>00132     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index = 0;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == 0 )
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136       <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e97fa93acc56afa64ac674c9f43eb5e4" title="Allocate the array.">AllocateArray</a>() )
<a name="l00137"></a>00137         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GetIndexGivenPRN</a>( prn, index ) )
<a name="l00141"></a>00141       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00142"></a>00142     
<a name="l00143"></a>00143     <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].almanac = alm;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00146"></a>00146   }
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#a9ad11c2fb7a1b40c502ff5d8979fe85">00148</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#a9ad11c2fb7a1b40c502ff5d8979fe85" title="Try to get the most current ephemeris or the ephemeris with the issue of data (ephemeris)...">GPS_BroadcastEphemerisAndAlmanacArray::GetEphemeris</a>( 
<a name="l00149"></a>00149     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="comment">//!&lt; The desired GPS PRN. (1-32 GPS, 120-138 SBAS).</span>
<a name="l00150"></a>00150 <span class="comment"></span>    <a class="code" href="struct_g_p_s__struct_ephemeris.html" title="A set of satellite orbit parameters that is used to calculate GPS satellite positions...">GPS_structEphemeris</a> &amp;eph, <span class="comment">//!&lt; A reference to an ephemeris struct in which to store the data.</span>
<a name="l00151"></a>00151 <span class="comment"></span>    <span class="keywordtype">bool</span> &amp;isAvailable,        <span class="comment">//!&lt; This boolean indicates if ephemeris data is available or not.</span>
<a name="l00152"></a>00152 <span class="comment"></span>    <span class="keywordtype">char</span> iode                 <span class="comment">//!&lt; The issue of data for the ephemeris, -1 means get the most current.</span>
<a name="l00153"></a>00153 <span class="comment"></span>    )
<a name="l00154"></a>00154   {
<a name="l00155"></a>00155     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index = 0;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == 0 )
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159       isAvailable = <span class="keyword">false</span>;
<a name="l00160"></a>00160       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00161"></a>00161     }
<a name="l00162"></a>00162     
<a name="l00163"></a>00163     <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GetIndexGivenPRN</a>( prn, index ) )
<a name="l00164"></a>00164       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="comment">// check the prn to see if any ephemeris information is available.</span>
<a name="l00167"></a>00167     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.prn == 0 )
<a name="l00168"></a>00168     {
<a name="l00169"></a>00169       isAvailable = <span class="keyword">false</span>;
<a name="l00170"></a>00170       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     isAvailable = <span class="keyword">true</span>;
<a name="l00174"></a>00174     <span class="keywordflow">if</span>( iode == -1 )
<a name="l00175"></a>00175     {
<a name="l00176"></a>00176       eph = <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph;      
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178     <span class="keywordflow">else</span>
<a name="l00179"></a>00179     {
<a name="l00180"></a>00180       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.iode == iode )
<a name="l00181"></a>00181       {
<a name="l00182"></a>00182         eph = <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph;
<a name="l00183"></a>00183       }
<a name="l00184"></a>00184       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].previousEph.iode == iode )
<a name="l00185"></a>00185       {
<a name="l00186"></a>00186         eph = <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].previousEph;
<a name="l00187"></a>00187       }
<a name="l00188"></a>00188       <span class="keywordflow">else</span>
<a name="l00189"></a>00189       {
<a name="l00190"></a>00190         isAvailable = <span class="keyword">false</span>;
<a name="l00191"></a>00191       }
<a name="l00192"></a>00192     }
<a name="l00193"></a>00193     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00194"></a>00194   }
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#f036d2626299c9d2e0e2223a4c2f0967">00196</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#f036d2626299c9d2e0e2223a4c2f0967" title="Try to get the week, and time of week of the most current ephemeris for the prn specified...">GPS_BroadcastEphemerisAndAlmanacArray::GetEphemerisTOW</a>( 
<a name="l00197"></a>00197     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="comment">//!&lt; The desired GPS PRN. (1-32 GPS, 120-138 SBAS).</span>
<a name="l00198"></a>00198 <span class="comment"></span>    <span class="keywordtype">bool</span> &amp;isAvailable,        <span class="comment">//!&lt; This boolean indicates if ephemeris data is available or not.</span>
<a name="l00199"></a>00199 <span class="comment"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> &amp;week,     <span class="comment">//!&lt; The correct week corresponding to the time of week based on the Z-count in the Hand Over Word.</span>
<a name="l00200"></a>00200 <span class="comment"></span>    <span class="keywordtype">unsigned</span> &amp;tow             <span class="comment">//!&lt; The time of week based on the Z-count in the Hand Over Word.</span>
<a name="l00201"></a>00201 <span class="comment"></span>    )
<a name="l00202"></a>00202   {
<a name="l00203"></a>00203     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index = 0;
<a name="l00204"></a>00204     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> eph_week = 0;
<a name="l00205"></a>00205     <span class="keywordtype">int</span> eph_toe = 0;
<a name="l00206"></a>00206     <span class="keywordtype">int</span> eph_tow = 0;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == 0 )
<a name="l00209"></a>00209     {
<a name="l00210"></a>00210       isAvailable = <span class="keyword">false</span>;
<a name="l00211"></a>00211       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     
<a name="l00214"></a>00214     <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GetIndexGivenPRN</a>( prn, index ) )
<a name="l00215"></a>00215       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="comment">// check the prn to see if any ephemeris information is available.</span>
<a name="l00218"></a>00218     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.prn == 0 )
<a name="l00219"></a>00219     {
<a name="l00220"></a>00220       isAvailable = <span class="keyword">false</span>;
<a name="l00221"></a>00221       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     isAvailable = <span class="keyword">true</span>;
<a name="l00225"></a>00225     <span class="keywordflow">if</span>( isAvailable )
<a name="l00226"></a>00226     {
<a name="l00227"></a>00227       eph_toe  = (int)<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.toe;
<a name="l00228"></a>00228       eph_week = <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.week;
<a name="l00229"></a>00229       eph_tow  = (<span class="keywordtype">int</span>)<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.tow;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231       <span class="comment">// check for week rolloever condition, </span>
<a name="l00232"></a>00232       <span class="comment">// if the tow of week is different by more than four days </span>
<a name="l00233"></a>00233       <span class="comment">// compared to the time of ephemeris, then the tow is in the next week</span>
<a name="l00234"></a>00234       <span class="keywordflow">if</span>( (eph_tow - eph_toe) &lt; (-4*86400) )
<a name="l00235"></a>00235       {
<a name="l00236"></a>00236         eph_week++;
<a name="l00237"></a>00237       }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239       week = eph_week;
<a name="l00240"></a>00240       tow  = eph_tow;
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     <span class="keywordflow">else</span>
<a name="l00243"></a>00243     {
<a name="l00244"></a>00244       week = 0;
<a name="l00245"></a>00245       tow = 0;
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249   }
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e1ebe924a0caf517716eb44ad3d13e6a">00251</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e1ebe924a0caf517716eb44ad3d13e6a" title="Check if ephemeris information is available for a PRN.">GPS_BroadcastEphemerisAndAlmanacArray::IsEphemerisAvailable</a>( 
<a name="l00252"></a>00252     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="comment">//!&lt; The desired GPS PRN. (1-32 GPS, 120-138 SBAS).</span>
<a name="l00253"></a>00253 <span class="comment"></span>    <span class="keywordtype">bool</span> &amp;isAvailable,        <span class="comment">//!&lt; This boolean indicates if ephemeris data is available or not.</span>
<a name="l00254"></a>00254 <span class="comment"></span>    <span class="keywordtype">char</span> iode                 <span class="comment">//!&lt; The issue of data for the ephemeris, -1 means get the most current.</span>
<a name="l00255"></a>00255 <span class="comment"></span>    )
<a name="l00256"></a>00256   {
<a name="l00257"></a>00257     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> index = 0;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="comment">// Check if there is any data in the array.</span>
<a name="l00260"></a>00260     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#d135bc16dd26b133c7bd75943d21180d" title="The maximum number of elements in m_array.">m_arrayLength</a> == 0 )
<a name="l00261"></a>00261     { 
<a name="l00262"></a>00262       isAvailable = <span class="keyword">false</span>;
<a name="l00263"></a>00263       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00264"></a>00264     }
<a name="l00265"></a>00265     
<a name="l00266"></a>00266     <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GetIndexGivenPRN</a>( prn, index ) )
<a name="l00267"></a>00267       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="comment">// check the prn to see if any ephemeris information is available.</span>
<a name="l00270"></a>00270     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.prn == 0 )
<a name="l00271"></a>00271     {
<a name="l00272"></a>00272       isAvailable = <span class="keyword">false</span>;
<a name="l00273"></a>00273       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00274"></a>00274     }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <span class="keywordflow">if</span>( iode == -1 )
<a name="l00277"></a>00277     {
<a name="l00278"></a>00278       isAvailable = <span class="keyword">true</span>;
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280     <span class="keywordflow">else</span>
<a name="l00281"></a>00281     {
<a name="l00282"></a>00282       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].currentEph.iode == iode )
<a name="l00283"></a>00283       {
<a name="l00284"></a>00284         isAvailable = <span class="keyword">true</span>;
<a name="l00285"></a>00285       }
<a name="l00286"></a>00286       <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#cb71e6efa4e051ab073739b7c98f0399" title="A pointer to the array of GPS satellite orbit information structs.">m_array</a>[index].previousEph.iode == iode )
<a name="l00287"></a>00287       {
<a name="l00288"></a>00288         isAvailable = <span class="keyword">true</span>;
<a name="l00289"></a>00289       }
<a name="l00290"></a>00290       <span class="keywordflow">else</span>
<a name="l00291"></a>00291       {
<a name="l00292"></a>00292         isAvailable = <span class="keyword">false</span>;
<a name="l00293"></a>00293       }
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9">00300</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#5c6231f1074f3222b9d21b5e0214f9b9" title="Get the index of the PRN in the array.">GPS_BroadcastEphemerisAndAlmanacArray::GetIndexGivenPRN</a>( <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> prn, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> &amp;index )
<a name="l00301"></a>00301   {
<a name="l00302"></a>00302     <span class="comment">// GPS 1-32</span>
<a name="l00303"></a>00303     <span class="comment">// Pseudolites are 33-37</span>
<a name="l00304"></a>00304     <span class="comment">// SBAS is 120-138</span>
<a name="l00305"></a>00305     <span class="comment">// WAAS, EGNOS, MSAS</span>
<a name="l00306"></a>00306     <span class="comment">//</span>
<a name="l00307"></a>00307     <span class="comment">// WAAS:</span>
<a name="l00308"></a>00308     <span class="comment">// AOR-W       122</span>
<a name="l00309"></a>00309     <span class="comment">// Anik        138</span>
<a name="l00310"></a>00310     <span class="comment">// POR         134</span>
<a name="l00311"></a>00311     <span class="comment">// PanAm       135</span>
<a name="l00312"></a>00312     <span class="comment">//</span>
<a name="l00313"></a>00313     <span class="comment">// EGNOS:</span>
<a name="l00314"></a>00314     <span class="comment">// AOR-E       120</span>
<a name="l00315"></a>00315     <span class="comment">// Artemis     124</span>
<a name="l00316"></a>00316     <span class="comment">// IOR-W       126</span>
<a name="l00317"></a>00317     <span class="comment">// IOR-E       131</span>
<a name="l00318"></a>00318     <span class="comment">//</span>
<a name="l00319"></a>00319     <span class="comment">// MSAS:</span>
<a name="l00320"></a>00320     <span class="comment">// MTSAT-1     129</span>
<a name="l00321"></a>00321     <span class="comment">// MTSAT-2     137</span>
<a name="l00322"></a>00322     <span class="comment">//</span>
<a name="l00323"></a>00323     <span class="comment">// The index mapping is as follows:</span>
<a name="l00324"></a>00324     <span class="comment">// PRN 1-37    maps to indidex 0-36</span>
<a name="l00325"></a>00325     <span class="comment">// PRN 38-40   maps to indices 37-39 (reserved mappings)</span>
<a name="l00326"></a>00326     <span class="comment">// PRN 120-138 maps to indicex 40-58</span>
<a name="l00327"></a>00327     
<a name="l00328"></a>00328 
<a name="l00329"></a>00329     <span class="comment">// check unsupported prn values</span>
<a name="l00330"></a>00330     <span class="keywordflow">if</span>( prn == 0 )
<a name="l00331"></a>00331     {
<a name="l00332"></a>00332       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00333"></a>00333     }
<a name="l00334"></a>00334     <span class="keywordflow">if</span>( prn &gt; 38 &amp;&amp; prn &lt; 120 )
<a name="l00335"></a>00335     {
<a name="l00336"></a>00336       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00337"></a>00337     }
<a name="l00338"></a>00338     <span class="keywordflow">if</span>( prn &gt; 138 )
<a name="l00339"></a>00339     {
<a name="l00340"></a>00340       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342     
<a name="l00343"></a>00343     <span class="keywordflow">if</span>( prn &lt; 38 )
<a name="l00344"></a>00344     {
<a name="l00345"></a>00345       index = prn - 1;
<a name="l00346"></a>00346     }
<a name="l00347"></a>00347     <span class="keywordflow">if</span>( prn &gt; 119 &amp;&amp; prn &lt; 139 )
<a name="l00348"></a>00348     {
<a name="l00349"></a>00349       index = prn - 80;
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00352"></a>00352   }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#7573d305cf1b58bfffb4d34048ce4fbe">00358</a>   <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#7573d305cf1b58bfffb4d34048ce4fbe" title="The default constructor (no data allocated yet).">GNSS_RxData::GNSS_RxData</a>()
<a name="l00359"></a>00359   : m_nrValidObs(0), 
<a name="l00360"></a>00360     m_prev_nrValidObs(0),
<a name="l00361"></a>00361     m_elevationMask(5.0*<a class="code" href="constants_8h.html#f7e8592d0a634bd3642e9fd508ea8022" title="PI/180.0.">DEG2RAD</a>),
<a name="l00362"></a>00362     m_cnoMask(28.0),
<a name="l00363"></a>00363     m_locktimeMask(0.0),
<a name="l00364"></a>00364     m_maxAgeEphemeris(14400), <span class="comment">// 4 hours</span>
<a name="l00365"></a>00365     m_DisableTropoCorrection(false),
<a name="l00366"></a>00366     m_DisableIonoCorrection(false),
<a name="l00367"></a>00367     m_fid(NULL),
<a name="l00368"></a>00368     m_messageLength(0),
<a name="l00369"></a>00369     m_rxDataType(GNSS_RXDATA_UNKNOWN),
<a name="l00370"></a>00370     m_CheckRinexObservationHeader(false),
<a name="l00371"></a>00371     m_RINEX_use_eph(false),
<a name="l00372"></a>00372     m_RINEX_eph_index(0)
<a name="l00373"></a>00373   { 
<a name="l00374"></a>00374     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>[0] = <span class="charliteral">'\0'</span>;
<a name="l00375"></a>00375     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#6854ad2d6d8c43835ed2bffafeb63828" title="Set all data in the measurement array to zero.">ZeroAllMeasurements</a>();
<a name="l00376"></a>00376     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#9f913abbec4bc7170d035da7240d4273" title="Set all PVT data to zero.">ZeroPVT</a>();
<a name="l00377"></a>00377 
<a name="l00378"></a>00378     memset( &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#9a74f2a075fcf027835ca172d33481ed" title="The klobuchar ionospheric correction parameters for GPS.">m_klobuchar</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_klobuchar.html" title="A container for klobuchar sytle ionospheric parameters.">GNSS_structKlobuchar</a>) );
<a name="l00379"></a>00379     memset( &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4ae69480ba39617fdbe0121be51ca6d8" title="Decoded RINEX Observation Header information.">m_RINEX_obs_header</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_r_i_n_e_x__struct_decoded_header.html" title="RINEX VERSION 2.11: A container required information from a decode RINEX header.">RINEX_structDecodedHeader</a>) );
<a name="l00380"></a>00380     
<a name="l00381"></a>00381     m_RINEX_eph.eph_array = NULL;
<a name="l00382"></a>00382     m_RINEX_eph.array_length = 0;
<a name="l00383"></a>00383     m_RINEX_eph.max_array_length = 0;
<a name="l00384"></a>00384   }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 
<a name="l00387"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#39bb8272277079b1e7a8472439071f90">00387</a>   <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#39bb8272277079b1e7a8472439071f90" title="The destructor.">GNSS_RxData::~GNSS_RxData</a>()
<a name="l00388"></a>00388   {
<a name="l00389"></a>00389     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> != NULL )
<a name="l00390"></a>00390     {
<a name="l00391"></a>00391       fclose( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> );
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393     <span class="keywordflow">if</span>( m_RINEX_eph.eph_array != NULL )
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395       <span class="keyword">delete</span>[] m_RINEX_eph.eph_array;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397   }
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#6854ad2d6d8c43835ed2bffafeb63828">00400</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#6854ad2d6d8c43835ed2bffafeb63828" title="Set all data in the measurement array to zero.">GNSS_RxData::ZeroAllMeasurements</a>()
<a name="l00401"></a>00401   {
<a name="l00402"></a>00402     <span class="keywordtype">unsigned</span> i = 0;
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a> = 0;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="_g_n_s_s___rx_data_8h.html#de46e7b2c415b2a1a4f5f4011e76d8d8">GNSS_RXDATA_NR_CHANNELS</a>; i++ )
<a name="l00407"></a>00407     {
<a name="l00408"></a>00408       memset( &amp;(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i]), 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_measurement.html" title="Measurement data associated with a single receiver measurement channel.">GNSS_structMeasurement</a>) );
<a name="l00409"></a>00409       memset( &amp;(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[i]), 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_measurement.html" title="Measurement data associated with a single receiver measurement channel.">GNSS_structMeasurement</a>) );
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00412"></a>00412   }
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#9f913abbec4bc7170d035da7240d4273">00415</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#9f913abbec4bc7170d035da7240d4273" title="Set all PVT data to zero.">GNSS_RxData::ZeroPVT</a>()
<a name="l00416"></a>00416   {
<a name="l00417"></a>00417     memset( &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_p_v_t.html" title="A struct for holding position, velocity and time.">GNSS_structPVT</a>) );
<a name="l00418"></a>00418     memset( &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b5a4d70eb050a710917d2593c63c5392" title="The receiver&amp;#39;s previous position, velocity, and time information.">m_prev_pvt</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_p_v_t.html" title="A struct for holding position, velocity and time.">GNSS_structPVT</a>) );
<a name="l00419"></a>00419     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00420"></a>00420   }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#e295c912ea580b8441fb5b64bd5e2781">00423</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#e295c912ea580b8441fb5b64bd5e2781" title="Initialize the receiver data object with data path information.">GNSS_RxData::Initialize</a>( 
<a name="l00424"></a>00424     <span class="keyword">const</span> <span class="keywordtype">char</span>* path,                  <span class="comment">//!&lt; The path to the Observation data file. </span>
<a name="l00425"></a>00425 <span class="comment"></span>    <span class="keywordtype">bool</span> &amp;isValidPath,                 <span class="comment">//!&lt; A boolean to indicate if the path is valid.</span>
<a name="l00426"></a>00426 <span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf06299" title="These are the supported receiver data types.">GNSS_enumRxDataType</a> rxType,  <span class="comment">//!&lt; The receiver data type.</span>
<a name="l00427"></a>00427 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* RINEX_ephemeris_path   <span class="comment">//!&lt; The path to a RINEX ephemeris file, NULL if not available.</span>
<a name="l00428"></a>00428 <span class="comment"></span>    )
<a name="l00429"></a>00429   {
<a name="l00430"></a>00430     <span class="keywordtype">bool</span> isRinexValid = <span class="keyword">false</span>;
<a name="l00431"></a>00431     isValidPath = <span class="keyword">false</span>;
<a name="l00432"></a>00432     
<a name="l00433"></a>00433     <span class="keywordflow">if</span>( path == NULL )
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437     <span class="keywordflow">if</span>( rxType == GNSS_RXDATA_UNKNOWN )
<a name="l00438"></a>00438     {
<a name="l00439"></a>00439       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00440"></a>00440     }
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#a2a7c940dd79483939364be70a9d31fa" title="The receiver data type.">m_rxDataType</a> = rxType;
<a name="l00443"></a>00443     
<a name="l00444"></a>00444     <span class="keywordflow">if</span>( rxType == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629975c8f5069c2f324de69cc51da8ad8bf7" title="RINEX version 2.1.">GNSS_RXDATA_RINEX21</a> || rxType == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629960af7e4754a899c8207c03b75cfcd9fe" title="RINEX version 2.11.">GNSS_RXDATA_RINEX211</a> )
<a name="l00445"></a>00445     {
<a name="l00446"></a>00446       <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#2fe42c32d54f225207c62816762122cf" title="Check the header on the RINEX Observation file to confirm it has the correct version...">CheckRINEXObservationHeader</a>( path, isRinexValid ) )
<a name="l00447"></a>00447         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00448"></a>00448       <span class="keywordflow">if</span>( !isRinexValid )
<a name="l00449"></a>00449         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     <span class="keywordflow">if</span>( RINEX_ephemeris_path != NULL )
<a name="l00453"></a>00453     {
<a name="l00454"></a>00454       m_RINEX_eph.filepath = RINEX_ephemeris_path;
<a name="l00455"></a>00455       
<a name="l00456"></a>00456       <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#30d948553428df79c2d763e9c3c9bb2b" title="If a RINEX GPS Navigation file is associated with this receiver, load all the ephemeris...">LoadRINEXNavigationData</a>() )
<a name="l00457"></a>00457         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459       <span class="comment">// Indicate that the RINEX ephemeris data can be used.</span>
<a name="l00460"></a>00460       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2f707e92f7d02b850598a49baa7cf81" title="A boolean to indicate RINEX ephemeris information is used.">m_RINEX_use_eph</a> = <span class="keyword">true</span>;
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 <span class="preprocessor">#ifndef _CRT_SECURE_NO_DEPRECATE</span>
<a name="l00464"></a>00464 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( fopen_s( &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>, path, <span class="stringliteral">"rb"</span> ) != 0 )
<a name="l00465"></a>00465       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00466"></a>00466 <span class="preprocessor">#else</span>
<a name="l00467"></a>00467 <span class="preprocessor"></span>    <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> = fopen( path, <span class="stringliteral">"rb"</span> );
<a name="l00468"></a>00468 <span class="preprocessor">#endif</span>
<a name="l00469"></a>00469 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> == NULL )    
<a name="l00470"></a>00470       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="keywordflow">if</span>( rxType == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629975c8f5069c2f324de69cc51da8ad8bf7" title="RINEX version 2.1.">GNSS_RXDATA_RINEX21</a> || rxType == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629960af7e4754a899c8207c03b75cfcd9fe" title="RINEX version 2.11.">GNSS_RXDATA_RINEX211</a> )
<a name="l00474"></a>00474     {
<a name="l00475"></a>00475       <span class="comment">// advance over the header lines</span>
<a name="l00476"></a>00476       <span class="keywordflow">while</span>( !feof(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>) &amp;&amp; ferror(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>)==0 )
<a name="l00477"></a>00477       {
<a name="l00478"></a>00478         <span class="keywordflow">if</span>( fgets( (<span class="keywordtype">char</span>*)<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>, <a class="code" href="_g_n_s_s___rx_data_8h.html#ffae220d3e7c176f09ed25b09ba8bdff">GNSS_RXDATA_MSG_LENGTH</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> ) == NULL )
<a name="l00479"></a>00479           <span class="keywordflow">break</span>;
<a name="l00480"></a>00480         <span class="keywordflow">if</span>( strstr( (<span class="keywordtype">char</span>*)m_message, <span class="stringliteral">"END OF HEADER"</span> ) != NULL )
<a name="l00481"></a>00481           <span class="keywordflow">break</span>;
<a name="l00482"></a>00482       }
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485     <span class="keywordflow">if</span>( feof(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>) || ferror(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>) != 0 )
<a name="l00486"></a>00486     {
<a name="l00487"></a>00487       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> != NULL )
<a name="l00488"></a>00488         fclose(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>);
<a name="l00489"></a>00489       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00490"></a>00490     }
<a name="l00491"></a>00491     
<a name="l00492"></a>00492     isValidPath = <span class="keyword">true</span>;
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00495"></a>00495   }
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#edb98ead0553c5c7b601d71efca8189c">00497</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#edb98ead0553c5c7b601d71efca8189c" title="Load the next epoch of data.">GNSS_RxData::LoadNext</a>( <span class="keywordtype">bool</span> &amp;endOfStream )
<a name="l00498"></a>00498   {
<a name="l00499"></a>00499     <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
<a name="l00500"></a>00500     <span class="keywordflow">switch</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#a2a7c940dd79483939364be70a9d31fa" title="The receiver data type.">m_rxDataType</a> )
<a name="l00501"></a>00501     {
<a name="l00502"></a>00502     <span class="keywordflow">case</span> <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf062992a05cb57fbd9ed643d0a5bf21f356c80" title="NovAtel OEM4 data.">GNSS_RXDATA_NOVATELOEM4</a>:
<a name="l00503"></a>00503       {
<a name="l00504"></a>00504         result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b8b7fa52a73acf9d83d3895065e53e12" title="Load the next epoch of data of GNSS_RXDATA_NOVATELOEM4 data.">LoadNext_NOVATELOEM4</a>( endOfStream );
<a name="l00505"></a>00505         <span class="keywordflow">break</span>;
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507     <span class="keywordflow">case</span> <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629975c8f5069c2f324de69cc51da8ad8bf7" title="RINEX version 2.1.">GNSS_RXDATA_RINEX21</a>:
<a name="l00508"></a>00508       {
<a name="l00509"></a>00509         result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#aacaca5e29b44d90140d391c4c1f54c3" title="Load the next epoch of data of GNSS_RXDATA_RINEX21 data.">LoadNext_RINEX21</a>( endOfStream );
<a name="l00510"></a>00510         <span class="keywordflow">break</span>;
<a name="l00511"></a>00511       }
<a name="l00512"></a>00512     <span class="keywordflow">case</span> <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629960af7e4754a899c8207c03b75cfcd9fe" title="RINEX version 2.11.">GNSS_RXDATA_RINEX211</a>:
<a name="l00513"></a>00513       {
<a name="l00514"></a>00514         result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#e8c77b04c93180bd23e7ea7a2e5e53f4" title="Load the next epoch of data of GNSS_RXDATA_RINEX211 data.">LoadNext_RINEX211</a>( endOfStream );
<a name="l00515"></a>00515         <span class="keywordflow">break</span>;
<a name="l00516"></a>00516       }
<a name="l00517"></a>00517     <span class="keywordflow">default</span>:
<a name="l00518"></a>00518       {
<a name="l00519"></a>00519         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00520"></a>00520         <span class="keywordflow">break</span>;
<a name="l00521"></a>00521       }
<a name="l00522"></a>00522     }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="keywordflow">if</span>( result )
<a name="l00525"></a>00525     {
<a name="l00526"></a>00526       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2f707e92f7d02b850598a49baa7cf81" title="A boolean to indicate RINEX ephemeris information is used.">m_RINEX_use_eph</a> )
<a name="l00527"></a>00527       {
<a name="l00528"></a>00528         <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#0c78cf924383bae9f04489502b972028" title="If a RINEX GPS Navigation file is associated with this receiver, Load m_EphAlmArray...">UpdateTheEphemerisArrayWithUsingRINEX</a>() )
<a name="l00529"></a>00529           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00530"></a>00530       }
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532     <span class="keywordflow">return</span> result;
<a name="l00533"></a>00533   }
<a name="l00534"></a>00534 
<a name="l00535"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#2fe42c32d54f225207c62816762122cf">00535</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#2fe42c32d54f225207c62816762122cf" title="Check the header on the RINEX Observation file to confirm it has the correct version...">GNSS_RxData::CheckRINEXObservationHeader</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#98fbdcdf4c7926e0671989583d146f49" title="The file path to the RINEX ephemeris data.">filepath</a>, <span class="keywordtype">bool</span> &amp;isValid )
<a name="l00536"></a>00536   {
<a name="l00537"></a>00537     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> result;
<a name="l00538"></a>00538     <span class="keywordtype">char</span> RINEX_buffer[16384];
<a name="l00539"></a>00539     <span class="keywordtype">unsigned</span> RINEX_buffer_size = 0;
<a name="l00540"></a>00540     <span class="keywordtype">double</span> version = 0.0;
<a name="l00541"></a>00541     <a class="code" href="rinex_8h.html#57d7b4f2b6bc7845da8404804e2be46f" title="RINEX VERSION 2.11: An enumeration for RINEX file types.">RINEX_enumFileType</a> file_type = RINEX_FILE_TYPE_UNKNOWN;
<a name="l00542"></a>00542 
<a name="l00543"></a>00543     isValid = <span class="keyword">false</span>;
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="keywordflow">if</span>( filepath == NULL )
<a name="l00546"></a>00546       <span class="keywordflow">return</span> <span class="keyword">false</span>;    
<a name="l00547"></a>00547     
<a name="l00548"></a>00548     result = <a class="code" href="rinex_8c.html#4842e9480f0b34216d998b6a33b6b050" title="RINEX VERSION 2.11: Get the RINEX header, as a buffer, from the specified file path...">RINEX_GetHeader</a>( 
<a name="l00549"></a>00549       filepath,
<a name="l00550"></a>00550       RINEX_buffer,
<a name="l00551"></a>00551       16384,
<a name="l00552"></a>00552       &amp;RINEX_buffer_size,
<a name="l00553"></a>00553       &amp;version,
<a name="l00554"></a>00554       &amp;file_type
<a name="l00555"></a>00555     );
<a name="l00556"></a>00556     <span class="keywordflow">if</span>( result == FALSE )
<a name="l00557"></a>00557       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00558"></a>00558 
<a name="l00559"></a>00559     result = <a class="code" href="rinex_8c.html#65543f9436a0ac13c7004beb272da102" title="RINEX VERSION 2.11: Decode the parts of the RINEX Observation file header that are...">RINEX_DecodeHeader_ObservationFile</a>(
<a name="l00560"></a>00560       RINEX_buffer,
<a name="l00561"></a>00561       RINEX_buffer_size,
<a name="l00562"></a>00562       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4ae69480ba39617fdbe0121be51ca6d8" title="Decoded RINEX Observation Header information.">m_RINEX_obs_header</a>
<a name="l00563"></a>00563       );
<a name="l00564"></a>00564     <span class="keywordflow">if</span>( result == FALSE )
<a name="l00565"></a>00565       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="keywordflow">if</span>( file_type != <a class="code" href="rinex_8h.html#57d7b4f2b6bc7845da8404804e2be46f6666eb6a436fee7bf1daa17eb888c7f0" title="&amp;#39;O&amp;#39; - Observation file.">RINEX_FILE_TYPE_OBS</a> )
<a name="l00568"></a>00568     {
<a name="l00569"></a>00569       isValid = <span class="keyword">false</span>;
<a name="l00570"></a>00570       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a>00573     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#a2a7c940dd79483939364be70a9d31fa" title="The receiver data type.">m_rxDataType</a> == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629975c8f5069c2f324de69cc51da8ad8bf7" title="RINEX version 2.1.">GNSS_RXDATA_RINEX21</a> )
<a name="l00574"></a>00574     {
<a name="l00575"></a>00575       <span class="keywordflow">if</span>( fabs( version - 2.1 ) &lt; 1e-02 )
<a name="l00576"></a>00576         isValid = <span class="keyword">true</span>;
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#a2a7c940dd79483939364be70a9d31fa" title="The receiver data type.">m_rxDataType</a> == <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf0629960af7e4754a899c8207c03b75cfcd9fe" title="RINEX version 2.11.">GNSS_RXDATA_RINEX211</a> )
<a name="l00579"></a>00579     {
<a name="l00580"></a>00580       <span class="keywordflow">if</span>( fabs( version - 2.11 ) &lt; 1e-03 )
<a name="l00581"></a>00581         isValid = <span class="keyword">true</span>;
<a name="l00582"></a>00582     }
<a name="l00583"></a>00583     <span class="keywordflow">else</span>
<a name="l00584"></a>00584     {
<a name="l00585"></a>00585       isValid = <span class="keyword">false</span>;
<a name="l00586"></a>00586     }
<a name="l00587"></a>00587     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00588"></a>00588   }
<a name="l00589"></a>00589 
<a name="l00590"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#aacaca5e29b44d90140d391c4c1f54c3">00590</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#aacaca5e29b44d90140d391c4c1f54c3" title="Load the next epoch of data of GNSS_RXDATA_RINEX21 data.">GNSS_RxData::LoadNext_RINEX21</a>( <span class="keywordtype">bool</span> &amp;endOfStream )
<a name="l00591"></a>00591   {
<a name="l00592"></a>00592     <span class="comment">/*</span>
<a name="l00593"></a>00593 <span class="comment">    BOOL result;</span>
<a name="l00594"></a>00594 <span class="comment">    unsigned i = 0;</span>
<a name="l00595"></a>00595 <span class="comment"></span>
<a name="l00596"></a>00596 <span class="comment">    FILE* fid = NULL;</span>
<a name="l00597"></a>00597 <span class="comment">    BOOL wasEndOfFileReached;  // Has the end of the file been reached (output).</span>
<a name="l00598"></a>00598 <span class="comment">    BOOL wasObservationFound;  // Was a valid observation found (output).</span>
<a name="l00599"></a>00599 <span class="comment">    unsigned filePosition=0;   // The file position for the start of the </span>
<a name="l00600"></a>00600 <span class="comment">    unsigned nrObs = 0;</span>
<a name="l00601"></a>00601 <span class="comment">    </span>
<a name="l00602"></a>00602 <span class="comment">    */</span>
<a name="l00603"></a>00603     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00604"></a>00604   }
<a name="l00605"></a>00605 
<a name="l00606"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#e8c77b04c93180bd23e7ea7a2e5e53f4">00606</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#e8c77b04c93180bd23e7ea7a2e5e53f4" title="Load the next epoch of data of GNSS_RXDATA_RINEX211 data.">GNSS_RxData::LoadNext_RINEX211</a>( <span class="keywordtype">bool</span> &amp;endOfStream )
<a name="l00607"></a>00607   {
<a name="l00608"></a>00608     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> result=0;
<a name="l00609"></a>00609     <span class="keywordtype">unsigned</span> i = 0;
<a name="l00610"></a>00610     <span class="keywordtype">unsigned</span> j = 0;
<a name="l00611"></a>00611     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> rx_gps_week = 0;
<a name="l00612"></a>00612     <span class="keywordtype">double</span> rx_gps_tow = 0.0;     
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> wasEndOfFileReached=0;  <span class="comment">// Has the end of the file been reached (output).</span>
<a name="l00615"></a>00615     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> wasObservationFound=0;  <span class="comment">// Was a valid observation found (output).</span>
<a name="l00616"></a>00616     <span class="keywordtype">unsigned</span> filePosition=0;   <span class="comment">// The file position for the start of the </span>
<a name="l00617"></a>00617     <span class="keywordtype">unsigned</span> nrObs = 0;
<a name="l00618"></a>00618     <span class="keywordtype">bool</span> isAvailable = <span class="keyword">false</span>;
<a name="l00619"></a>00619     
<a name="l00620"></a>00620     endOfStream = <span class="keyword">false</span>;
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> == NULL )
<a name="l00623"></a>00623       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625     <span class="comment">// Copy the current observations into the previous storage.</span>
<a name="l00626"></a>00626     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2e558431e77eacdf1050d3b9837b8b2" title="The number of usable items in m_prevObsArray.">m_prev_nrValidObs</a> = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>;
<a name="l00627"></a>00627     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; i++ )
<a name="l00628"></a>00628     {
<a name="l00629"></a>00629       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i];
<a name="l00630"></a>00630       memset( &amp;(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i]), 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_measurement.html" title="Measurement data associated with a single receiver measurement channel.">GNSS_structMeasurement</a>) ); <span class="comment">// Initialize to zero.</span>
<a name="l00631"></a>00631     }
<a name="l00632"></a>00632 
<a name="l00633"></a>00633     <span class="comment">// Get the next observation set.</span>
<a name="l00634"></a>00634     result = <a class="code" href="rinex_8c.html#df69bb87591f73953a02c9c8920227df" title="RINEX VERSION 2.11: Decode the next set of observations from the RINEX Observation...">RINEX_GetNextObservationSet</a>(
<a name="l00635"></a>00635       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>,
<a name="l00636"></a>00636       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4ae69480ba39617fdbe0121be51ca6d8" title="Decoded RINEX Observation Header information.">m_RINEX_obs_header</a>,
<a name="l00637"></a>00637       &amp;wasEndOfFileReached,
<a name="l00638"></a>00638       &amp;wasObservationFound,
<a name="l00639"></a>00639       &amp;filePosition,
<a name="l00640"></a>00640       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>,
<a name="l00641"></a>00641       <a class="code" href="_g_n_s_s___rx_data_8h.html#de46e7b2c415b2a1a4f5f4011e76d8d8">GNSS_RXDATA_NR_CHANNELS</a>,
<a name="l00642"></a>00642       &amp;nrObs,
<a name="l00643"></a>00643       &amp;rx_gps_week,
<a name="l00644"></a>00644       &amp;rx_gps_tow
<a name="l00645"></a>00645       );
<a name="l00646"></a>00646     <span class="keywordflow">if</span>( result == FALSE )
<a name="l00647"></a>00647       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649     <span class="keywordflow">if</span>( wasEndOfFileReached )
<a name="l00650"></a>00650     {
<a name="l00651"></a>00651       endOfStream = <span class="keyword">true</span>;
<a name="l00652"></a>00652       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00653"></a>00653     }
<a name="l00654"></a>00654 
<a name="l00655"></a>00655     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#18ce4636c107af596c0df586143b3481" title="The number of GPS L1 observations in m_ObsArray.">m_nrGPSL1Obs</a> = 0;
<a name="l00656"></a>00656     m_nrValidObs = 0;
<a name="l00657"></a>00657     <span class="keywordflow">if</span>( nrObs &gt; 0 )
<a name="l00658"></a>00658     {
<a name="l00659"></a>00659       <span class="comment">// Set the receiver time of the observation set.</span>
<a name="l00660"></a>00660       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a> = rx_gps_week;
<a name="l00661"></a>00661       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a>  = rx_gps_tow;
<a name="l00662"></a>00662 
<a name="l00663"></a>00663       <span class="keywordflow">for</span>(i = 0; i &lt; nrObs; i++ )
<a name="l00664"></a>00664       {
<a name="l00665"></a>00665         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e6aaf53ed5327566b8e004a526c87b10" title="The estimated pseudorange measurement standard deviation [m].">stdev_psr</a>     = 1.4f;  <span class="comment">// [m]</span>
<a name="l00666"></a>00666         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#52373aca9b5595c73c5bbdc064171da0" title="The estimated accumulated Doppler range measurement standard deviation [cycles].">stdev_adr</a>     = 0.05f; <span class="comment">// these are in cycles!.</span>
<a name="l00667"></a>00667         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#90981b957f709954341154f8a0de39e5" title="The estimated Doppler measurement standard deviation [Hz].">stdev_doppler</a> = 0.5f;  <span class="comment">// Hz</span>
<a name="l00668"></a>00668 
<a name="l00669"></a>00669         <span class="comment">// Check if ephemeris information is available</span>
<a name="l00670"></a>00670         <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e1ebe924a0caf517716eb44ad3d13e6a" title="Check if ephemeris information is available for a PRN.">IsEphemerisAvailable</a>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e4367fe223cf9cac34e04403c482777f" title="The unique id for this channel (eg PRN for GPS).">id</a>, isAvailable ) )
<a name="l00671"></a>00671           <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00672"></a>00672         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#7c1ee49f4083b57c2b6b4b777155e544" title="Indicates if this channel has valid associated ephemeris information.">isEphemerisValid</a>      = isAvailable;
<a name="l00673"></a>00673 
<a name="l00674"></a>00674         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c91e2af83e0075c8890d0ccd50f5850f" title="A boolean to indicate if the tropospheric correction is to be disabled for all satellites...">m_DisableTropoCorrection</a> )
<a name="l00675"></a>00675           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#377dbe1d8ec2bcf14bdbccb8f626dfa1" title="Indicates that the tropospheric correction should be applied.">useTropoCorrection</a>          = 0;
<a name="l00676"></a>00676         <span class="keywordflow">else</span>
<a name="l00677"></a>00677           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#377dbe1d8ec2bcf14bdbccb8f626dfa1" title="Indicates that the tropospheric correction should be applied.">useTropoCorrection</a>          = 1; <span class="comment">// defaults to yes</span>
<a name="l00678"></a>00678 
<a name="l00679"></a>00679         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fb0953b2127f3bacfdccbcdcb3c371b0" title="A boolean to indicate if the ionospheric correction is to be disabled for all satellites...">m_DisableIonoCorrection</a> )
<a name="l00680"></a>00680           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#bb12e5e7e0c3973bd86ad509bd6c50a1" title="Indicates that the broadcast ionospheric correction should be applied.">useBroadcastIonoCorrection</a>  = 0;
<a name="l00681"></a>00681         <span class="keywordflow">else</span>
<a name="l00682"></a>00682           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#bb12e5e7e0c3973bd86ad509bd6c50a1" title="Indicates that the broadcast ionospheric correction should be applied.">useBroadcastIonoCorrection</a>  = 1; <span class="comment">// default to yes</span>
<a name="l00683"></a>00683 
<a name="l00684"></a>00684         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == GNSS_GPS &amp;&amp;
<a name="l00685"></a>00685           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == GNSS_GPSL1 )
<a name="l00686"></a>00686         {
<a name="l00687"></a>00687           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#18ce4636c107af596c0df586143b3481" title="The number of GPS L1 observations in m_ObsArray.">m_nrGPSL1Obs</a>++;
<a name="l00688"></a>00688         }
<a name="l00689"></a>00689         m_nrValidObs++;
<a name="l00690"></a>00690       }
<a name="l00691"></a>00691     }
<a name="l00692"></a>00692 
<a name="l00693"></a>00693 
<a name="l00694"></a>00694     <span class="comment">// Search for matching observations in the previous set of data to pass on static information</span>
<a name="l00695"></a>00695     <span class="comment">// like ambiguities.</span>
<a name="l00696"></a>00696     <span class="keywordflow">for</span>( i = 0; i &lt; m_nrValidObs; i++ )
<a name="l00697"></a>00697     {
<a name="l00698"></a>00698       <span class="keywordflow">for</span>( j = 0; j &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2e558431e77eacdf1050d3b9837b8b2" title="The number of usable items in m_prevObsArray.">m_prev_nrValidObs</a>; j++ )
<a name="l00699"></a>00699       {
<a name="l00700"></a>00700         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].codeType == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].codeType &amp;&amp;
<a name="l00701"></a>00701           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].freqType &amp;&amp;
<a name="l00702"></a>00702           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].system &amp;&amp;
<a name="l00703"></a>00703           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<span class="keywordtype">id</span> == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<span class="keywordtype">id</span> ) <span class="comment">// Note should also check that channels are the same if real time!</span>
<a name="l00704"></a>00704         {
<a name="l00705"></a>00705           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#dd1c0378e3fe7d366c721c796bf1de9e" title="The estimated integer component of the adr. This may be the single or double differenced...">ambiguity</a> = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#dd1c0378e3fe7d366c721c796bf1de9e" title="The estimated integer component of the adr. This may be the single or double differenced...">ambiguity</a>;
<a name="l00706"></a>00706           <span class="keywordflow">break</span>;
<a name="l00707"></a>00707         }
<a name="l00708"></a>00708       }
<a name="l00709"></a>00709     }
<a name="l00710"></a>00710 
<a name="l00711"></a>00711     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00712"></a>00712   }  
<a name="l00713"></a>00713 
<a name="l00714"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b8b7fa52a73acf9d83d3895065e53e12">00714</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b8b7fa52a73acf9d83d3895065e53e12" title="Load the next epoch of data of GNSS_RXDATA_NOVATELOEM4 data.">GNSS_RxData::LoadNext_NOVATELOEM4</a>( <span class="keywordtype">bool</span> &amp;endOfStream )
<a name="l00715"></a>00715   {
<a name="l00716"></a>00716     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> result = FALSE;
<a name="l00717"></a>00717     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> wasEndOfFileReached = FALSE;
<a name="l00718"></a>00718     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> wasMessageFound = FALSE;
<a name="l00719"></a>00719     <span class="keywordtype">unsigned</span> filePosition = 0;
<a name="l00720"></a>00720     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> messageID = 0;
<a name="l00721"></a>00721     <a class="code" href="novatel_8h.html#a8b2683b80d3d4f909a4643937876c3b" title="This enumeration is for NovAtel OEM4 message types.">NOVATELOEM4_enumMessageType</a> messageType;
<a name="l00722"></a>00722     <span class="keywordtype">unsigned</span> numberBadCRC = 0;
<a name="l00723"></a>00723 
<a name="l00724"></a>00724     <span class="comment">//  A NovAtel OEM4 header information struct.</span>
<a name="l00725"></a>00725     <a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_binary_header.html" title="The NovAtel OEM4 binary message header.">NOVATELOEM4_structBinaryHeader</a> header; 
<a name="l00726"></a>00726 
<a name="l00727"></a>00727     <span class="comment">// An array of struct_NOVATELOEM4_RANGE.</span>
<a name="l00728"></a>00728     <a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html" title="A container for a NovAtel OEM4 observation.">NOVATELOEM4_structObservation</a> obsArray[<a class="code" href="_g_n_s_s___rx_data_8h.html#de46e7b2c415b2a1a4f5f4011e76d8d8">GNSS_RXDATA_NR_CHANNELS</a>];
<a name="l00729"></a>00729 
<a name="l00730"></a>00730     <span class="comment">// A gps ephemeris struct.</span>
<a name="l00731"></a>00731     <a class="code" href="struct_g_p_s__struct_ephemeris.html" title="A set of satellite orbit parameters that is used to calculate GPS satellite positions...">GPS_structEphemeris</a> eph;
<a name="l00732"></a>00732     <span class="keywordtype">unsigned</span> prn;            <span class="comment">// The PRN.</span>
<a name="l00733"></a>00733     <span class="keywordtype">unsigned</span> reference_week; <span class="comment">// The ephemeris reference week.</span>
<a name="l00734"></a>00734     <span class="keywordtype">unsigned</span> reference_tow;  <span class="comment">// The ephemeris reference time of week.</span>
<a name="l00735"></a>00735     <span class="keywordtype">unsigned</span> tow;            <span class="comment">// The tow associated with the start of Subframe1.</span>
<a name="l00736"></a>00736 
<a name="l00737"></a>00737     <span class="keywordtype">unsigned</span> nrValidObs;
<a name="l00738"></a>00738     <span class="keywordtype">unsigned</span> i = 0;
<a name="l00739"></a>00739     <span class="keywordtype">unsigned</span> j = 0;
<a name="l00740"></a>00740     <span class="keywordtype">bool</span> isAvailable;  <span class="comment">// A boolean used in checking if ephemeris is available.</span>
<a name="l00741"></a>00741 
<a name="l00742"></a>00742 
<a name="l00743"></a>00743     endOfStream = <span class="keyword">false</span>;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a> == NULL )
<a name="l00746"></a>00746       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748     <span class="comment">// Copy the current observations into the previous storage.</span>
<a name="l00749"></a>00749     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2e558431e77eacdf1050d3b9837b8b2" title="The number of usable items in m_prevObsArray.">m_prev_nrValidObs</a> = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>;
<a name="l00750"></a>00750     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; i++ )
<a name="l00751"></a>00751     {
<a name="l00752"></a>00752       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i];
<a name="l00753"></a>00753       memset( &amp;(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i]), 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_n_s_s__struct_measurement.html" title="Measurement data associated with a single receiver measurement channel.">GNSS_structMeasurement</a>) ); <span class="comment">// Initialize to zero.</span>
<a name="l00754"></a>00754     }
<a name="l00755"></a>00755 
<a name="l00756"></a>00756     <span class="keywordflow">switch</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#a2a7c940dd79483939364be70a9d31fa" title="The receiver data type.">m_rxDataType</a> )
<a name="l00757"></a>00757     {
<a name="l00758"></a>00758     <span class="keywordflow">case</span> <a class="code" href="gnss__types_8h.html#e06747a7ca84b36144d2ba259cf062992a05cb57fbd9ed643d0a5bf21f356c80" title="NovAtel OEM4 data.">GNSS_RXDATA_NOVATELOEM4</a>:
<a name="l00759"></a>00759       {  
<a name="l00760"></a>00760         <span class="keywordflow">while</span>( !wasEndOfFileReached &amp;&amp; !wasMessageFound )
<a name="l00761"></a>00761         {
<a name="l00762"></a>00762           result = <a class="code" href="novatel_8c.html#a36b226919514ae7f7f8233776cb53b9" title="Find the next NovAtel OEM4 message in an open file.">NOVATELOEM4_FindNextMessageInFile</a>( 
<a name="l00763"></a>00763             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#1761371bd41e03198417b029c1884c24" title="A file pointer to the input.">m_fid</a>,
<a name="l00764"></a>00764             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>,
<a name="l00765"></a>00765             <a class="code" href="_g_n_s_s___rx_data_8h.html#ffae220d3e7c176f09ed25b09ba8bdff">GNSS_RXDATA_MSG_LENGTH</a>,
<a name="l00766"></a>00766             &amp;wasEndOfFileReached,
<a name="l00767"></a>00767             &amp;wasMessageFound,
<a name="l00768"></a>00768             &amp;filePosition,
<a name="l00769"></a>00769             &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#8e438a96b75a7159545f3fad409fcc9d" title="The length of the message in the message buffer.">m_messageLength</a>,
<a name="l00770"></a>00770             &amp;messageID,
<a name="l00771"></a>00771             &amp;numberBadCRC 
<a name="l00772"></a>00772             );
<a name="l00773"></a>00773           <span class="keywordflow">if</span>( result == FALSE )
<a name="l00774"></a>00774             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00775"></a>00775           
<a name="l00776"></a>00776           messageType = (<a class="code" href="novatel_8h.html#a8b2683b80d3d4f909a4643937876c3b" title="This enumeration is for NovAtel OEM4 message types.">NOVATELOEM4_enumMessageType</a>)messageID;
<a name="l00777"></a>00777           <span class="keywordflow">if</span>( wasMessageFound &amp;&amp; messageType != NOVATELOEM4_RANGEB )
<a name="l00778"></a>00778           { 
<a name="l00779"></a>00779             <span class="keywordflow">if</span>( messageType == NOVATELOEM4_RAWEPHEMB )
<a name="l00780"></a>00780             {
<a name="l00781"></a>00781               memset( &amp;eph, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_g_p_s__struct_ephemeris.html" title="A set of satellite orbit parameters that is used to calculate GPS satellite positions...">GPS_structEphemeris</a>) );
<a name="l00782"></a>00782              
<a name="l00783"></a>00783               result = <a class="code" href="novatel_8c.html#bb009a73f7c6a4337cb29ab5b344719c" title="Decode a NovAtel OEM4 RAWEPHEMB message.">NOVATELOEM4_DecodeRAWEPHEMB</a>(
<a name="l00784"></a>00784                 <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>,
<a name="l00785"></a>00785                 <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#8e438a96b75a7159545f3fad409fcc9d" title="The length of the message in the message buffer.">m_messageLength</a>,
<a name="l00786"></a>00786                 &amp;header,
<a name="l00787"></a>00787                 &amp;prn,
<a name="l00788"></a>00788                 &amp;reference_week,
<a name="l00789"></a>00789                 &amp;reference_tow,
<a name="l00790"></a>00790                 &amp;tow,
<a name="l00791"></a>00791                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#81f2d333be0cb00a0acd1e58e41bda9f" title="10 bit issue of data (clock) []">iodc</a>,
<a name="l00792"></a>00792                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#91b2f3661c4dbbc95dbc83cc433e17c1" title="8 bit issue of data (ephemeris) []">iode</a>,
<a name="l00793"></a>00793                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#599e22f5e252be76c5891df2d08af31e" title="reference time ephemeris (0-604800) [s]">toe</a>,
<a name="l00794"></a>00794                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#033cec0e40fb5ae8a03b474591244bea" title="reference time (clock) (0-604800) [s]">toc</a>,
<a name="l00795"></a>00795                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#a0e9f78d7e3fa8d1ff9719398545d0bc" title="10 bit gps week 0-1023 (user must account for week rollover ) [week]">week</a>,
<a name="l00796"></a>00796                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#cfab6bad904bb937c67065432a50592c" title="6 bit health parameter, 0 if healthy, unhealth othersize [0=healthy]">health</a>,
<a name="l00797"></a>00797                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#fa08a1f968184c050951de4a105da876" title="1 = URA may be worse than indicated [0,1]">alert_flag</a>,
<a name="l00798"></a>00798                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#be9ce3799bac027f17c72fa4c69863e0" title="anti-spoof flag from 0=off, 1=on [0,1]">anti_spoof</a>,
<a name="l00799"></a>00799                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#50de3bb9f463eb62576ab30492040978" title="0=reserved, 1=P code on L2, 2=C/A on L2 [0,1,2]">code_on_L2</a>,
<a name="l00800"></a>00800                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#a9d575dde3402c0a14630cdfcf880896" title="User Range Accuracy lookup code, 0 is excellent, 15 is use at own risk [0-15], see...">ura</a>,
<a name="l00801"></a>00801                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#058c42b92c67f9f4bfe10de03cb18854" title="flag indicating if P is on L2 1=true [0,1]">L2_P_data_flag</a>,
<a name="l00802"></a>00802                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#f272912453fa4dfe0af6524fdac61a8f" title="fit interval flag (four hour interval or longer) 0=4 fours, 1=greater [0,1]">fit_interval_flag</a>,
<a name="l00803"></a>00803                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#119879f9120e614e488936a34dea1ef1" title="age of data offset [s]">age_of_data_offset</a>,
<a name="l00804"></a>00804                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#6404c39268a1be715c95c24c1a14414b" title="group delay [s]">tgd</a>,
<a name="l00805"></a>00805                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#be548d3be352dcb183087187ba173ab9" title="polynomial clock correction coefficient (rate of clock drift) [s/s^2]">af2</a>,
<a name="l00806"></a>00806                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#f6f218258806fe35e68683c0f51438c4" title="polynomial clock correction coefficient (clock drift) [s/s] Note: parameters from...">af1</a>,
<a name="l00807"></a>00807                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#69415cd72e7a074f53c4edce5e5cc380" title="polynomial clock correction coefficient (clock bias) [s] Note: parameters from ephemeris...">af0</a>,
<a name="l00808"></a>00808                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#a13fb2cbb1989935031a7d5c8cc12ec0" title="mean anomaly at reference time [rad]">m0</a>,
<a name="l00809"></a>00809                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#7f4751374f4d4d4e139d6df0a9bebe29" title="mean motion difference from computed value [rad/s]">delta_n</a>,
<a name="l00810"></a>00810                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#7859bcda1769f3f0ccc238dd61406e82" title="eccentricity []">ecc</a>,
<a name="l00811"></a>00811                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#709106af7c7ee908cf3c5de600ed51ae" title="square root of the semi-major axis [m^(1/2)]">sqrta</a>,
<a name="l00812"></a>00812                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#03ffce666d4ed89d62433d034a34330b" title="longitude of ascending node of orbit plane at weekly epoch [rad]">omega0</a>,
<a name="l00813"></a>00813                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#d0ad8b031e0eb956b4e1c9c660466681" title="inclination angle at reference time [rad]">i0</a>,
<a name="l00814"></a>00814                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#d405ec507db4d94e1612e3211a1c29bd" title="argument of perigee [rad]">w</a>,
<a name="l00815"></a>00815                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#5bcef84cb0513bd6ecb78e82b98f6f0c" title="rate of right ascension [rad/s]">omegadot</a>,
<a name="l00816"></a>00816                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#174859d88c4bf8c87bdcf7334847e7d6" title="rate of inclination angle [rad/s]">idot</a>,
<a name="l00817"></a>00817                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#9844e75782e05c7ab2fe27ef45715b1e" title="amplitude of the cosine harmonic correction term to the argument of latitude [rad]...">cuc</a>,
<a name="l00818"></a>00818                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#ddc62f1e6f094b25953b5fe3cb42545d" title="amplitude of the sine harmonic correction term to the argument of latitude [rad]">cus</a>,
<a name="l00819"></a>00819                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#41d7fa80a6bf3a63437af86338e3fbb3" title="amplitude of the cosine harmonic correction term to the orbit radius [m]">crc</a>,
<a name="l00820"></a>00820                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#6c8cad7c6b03e71c57da4eb5e9820954" title="amplitude of the sine harmonic correction term to the orbit radius [m]">crs</a>,
<a name="l00821"></a>00821                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#f7faefb5c87d846ad749dc5508922953" title="amplitude of the cosine harmonic correction term to the angle of inclination [rad]...">cic</a>,
<a name="l00822"></a>00822                 &amp;eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#33b7f917a6597fbb39c151115887bebc" title="amplitude of the sine harmonic correction term to the angle of inclination [rad]">cis</a> );
<a name="l00823"></a>00823               <span class="keywordflow">if</span>( result )
<a name="l00824"></a>00824               {
<a name="l00825"></a>00825                 eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#8c5f4f691032967ea438bac7272deb14" title="GPS PRN number.">prn</a> = prn;
<a name="l00826"></a>00826                 
<a name="l00827"></a>00827                 result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0" title="Add an ephemeris structure.">AddEphemeris</a>( eph.<a class="code" href="struct_g_p_s__struct_ephemeris.html#8c5f4f691032967ea438bac7272deb14" title="GPS PRN number.">prn</a>, eph );
<a name="l00828"></a>00828                 <span class="keywordflow">if</span>( !result )
<a name="l00829"></a>00829                 {
<a name="l00830"></a>00830                   <span class="comment">// An error occurred.</span>
<a name="l00831"></a>00831                   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00832"></a>00832                 }
<a name="l00833"></a>00833               }
<a name="l00834"></a>00834             }
<a name="l00835"></a>00835             wasMessageFound = <span class="keyword">false</span>;
<a name="l00836"></a>00836           }
<a name="l00837"></a>00837         }
<a name="l00838"></a>00838         <span class="keywordflow">if</span>( wasMessageFound &amp;&amp; messageType == NOVATELOEM4_RANGEB )
<a name="l00839"></a>00839         {
<a name="l00840"></a>00840           m_nrValidObs = 0;
<a name="l00841"></a>00841           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#18ce4636c107af596c0df586143b3481" title="The number of GPS L1 observations in m_ObsArray.">m_nrGPSL1Obs</a> = 0;
<a name="l00842"></a>00842           
<a name="l00843"></a>00843           result = <a class="code" href="novatel_8c.html#450b3d5d65b02d03f028823146c212ae" title="Decode a NovAtel OEM4 RANGEB message.">NOVATELOEM4_DecodeRANGEB</a>( 
<a name="l00844"></a>00844             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>,
<a name="l00845"></a>00845             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#8e438a96b75a7159545f3fad409fcc9d" title="The length of the message in the message buffer.">m_messageLength</a>,
<a name="l00846"></a>00846             &amp;header,
<a name="l00847"></a>00847             obsArray,
<a name="l00848"></a>00848             <a class="code" href="_g_n_s_s___rx_data_8h.html#de46e7b2c415b2a1a4f5f4011e76d8d8">GNSS_RXDATA_NR_CHANNELS</a>,
<a name="l00849"></a>00849             &amp;nrValidObs 
<a name="l00850"></a>00850             );
<a name="l00851"></a>00851           <span class="keywordflow">if</span>( result == FALSE )
<a name="l00852"></a>00852             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00853"></a>00853 
<a name="l00854"></a>00854           <span class="comment">// Set the receiver time of the observation set.</span>
<a name="l00855"></a>00855           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a> = header.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_binary_header.html#73ae9a95a0ae38789c8a4f16c735f9e3" title="The GPS week (0-1024+) [weeks].">gpsWeek</a>;
<a name="l00856"></a>00856           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a>  = header.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_binary_header.html#f1fa2cf6a690d52f4f72e4a1a0d7d070" title="The GPS time of week in milliseconds.">gpsMilliSeconds</a> / 1000.0;
<a name="l00857"></a>00857 
<a name="l00858"></a>00858           <span class="keywordflow">for</span>( i = 0; i &lt; nrValidObs &amp;&amp; i &lt; <a class="code" href="_g_n_s_s___rx_data_8h.html#de46e7b2c415b2a1a4f5f4011e76d8d8">GNSS_RXDATA_NR_CHANNELS</a>; i++ )
<a name="l00859"></a>00859           {
<a name="l00860"></a>00860             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#5a1085d48f3ffcb922112b02813484a6" title="The channel number associated with this measurement.">channel</a>   = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#9a75f7601e5cffff1dadc38d6535f911" title="The channel index.">channelNumber</a>;
<a name="l00861"></a>00861             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e4367fe223cf9cac34e04403c482777f" title="The unique id for this channel (eg PRN for GPS).">id</a>        = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#f63499e6e379913fe2cbc63aafabc3ce" title="The PRN for this channel.">prn</a>;
<a name="l00862"></a>00862 
<a name="l00863"></a>00863             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#244a0b86badeb8ef8179b3f5153e89cd" title="The satellite system associated with this channel.">system</a>    = (<a class="code" href="gnss__types_8h.html#18ebe584a842eea37f52a84f8c703a71" title="An enumeration for a GNSS system type.">GNSS_enumSystem</a>)obsArray[i].trackingStatus.eSatelliteSystem;
<a name="l00864"></a>00864             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#2ff4f65c5fab5291ac6c7bde4fe5015f" title="The code type for this channel.">codeType</a>  = (<a class="code" href="gnss__types_8h.html#5aea53903ff9f0ba5f44bbe6f00dba94" title="An enumerated for a GNSS code modulation type.">GNSS_enumCodeType</a>)obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#b685d73a2c3820cb140f22905ca5ae67" title="The code type for this channel.">eCodeType</a>;
<a name="l00865"></a>00865             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#199091cdc428febb52547028670b27d4" title="The frequency type for this channel.">freqType</a>  = (<a class="code" href="gnss__types_8h.html#440a5aa5f0dcd3d04610af9ed2c10d1b" title="An enumeration for a GNSS frequency type.">GNSS_enumFrequency</a>)obsArray[i].trackingStatus.eFrequency;
<a name="l00866"></a>00866 
<a name="l00867"></a>00867             <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#244a0b86badeb8ef8179b3f5153e89cd" title="The satellite system associated with this channel.">system</a> == GNSS_GPS &amp;&amp;
<a name="l00868"></a>00868               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#199091cdc428febb52547028670b27d4" title="The frequency type for this channel.">freqType</a> == GNSS_GPSL1 )
<a name="l00869"></a>00869             {
<a name="l00870"></a>00870               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#18ce4636c107af596c0df586143b3481" title="The number of GPS L1 observations in m_ObsArray.">m_nrGPSL1Obs</a>++;
<a name="l00871"></a>00871             }
<a name="l00872"></a>00872 
<a name="l00873"></a>00873             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#f477a43003a4a606d75dfaaeaa9e2830" title="The pseudorange measurement [m].">psr</a>       = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#3056326dab6182e51036276d13e58a1c" title="The pseudorange measurement [m].">psr</a>;
<a name="l00874"></a>00874             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#78d645c2da35340730a5b77ed3bf4b3d" title="The carrier phase or accumulated Doppler range measurement [cycles].">adr</a>       = -1.0*obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#ef49432f7af706f9ba64a3056d973a65" title="The carrier phase or accumulated Doppler range measurement [cycles].">adr</a>;
<a name="l00875"></a>00875             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#d17748cb4124c1fda281f13d3d6b5a91" title="The Doppler measurement for this channel [Hz].">doppler</a>   = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#4def1901ceb97dc376b9009fee503a81" title="The Doppler measurement for this channel [Hz].">doppler</a>;
<a name="l00876"></a>00876             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ce29dce448b7e9b61f6fd9f01f61e372" title="The carrier to noise density ratio for this channel [dB-Hz].">cno</a>       = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#8c9e9e3c5dcdaf04d88448876383a73a" title="The carrier to noise density ratio for this channel [dB-Hz].">cno</a>;
<a name="l00877"></a>00877             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#9d089b104a004d3d9be16b82721de568" title="The number of seconds of continous phase tracking (no known cycle slips) [s].">locktime</a>  = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#b40853d0d191cef3514c80496cc444b3" title="The number of seconds of continous phase tracking (no known cycle slips) [s].">locktime</a>;
<a name="l00878"></a>00878     
<a name="l00879"></a>00879             <span class="keywordflow">if</span>( obsArray[i].psrstd &lt; 0.2 )
<a name="l00880"></a>00880               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e6aaf53ed5327566b8e004a526c87b10" title="The estimated pseudorange measurement standard deviation [m].">stdev_psr</a>     = 0.2f;
<a name="l00881"></a>00881             <span class="keywordflow">else</span>
<a name="l00882"></a>00882               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e6aaf53ed5327566b8e004a526c87b10" title="The estimated pseudorange measurement standard deviation [m].">stdev_psr</a>     = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#586634a09437713b884988c40382b98b" title="The receiver estimated pseudorange measurement standard deviation [m].">psrstd</a>; 
<a name="l00883"></a>00883 
<a name="l00884"></a>00884             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e6aaf53ed5327566b8e004a526c87b10" title="The estimated pseudorange measurement standard deviation [m].">stdev_psr</a>     = 1.4f;
<a name="l00885"></a>00885             
<a name="l00886"></a>00886             <span class="keywordflow">if</span>( obsArray[i].adrstd &lt; 0.0025 )
<a name="l00887"></a>00887               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#52373aca9b5595c73c5bbdc064171da0" title="The estimated accumulated Doppler range measurement standard deviation [cycles].">stdev_adr</a>     = 0.0025f; <span class="comment">// these are in cycles!.              </span>
<a name="l00888"></a>00888             <span class="keywordflow">else</span>
<a name="l00889"></a>00889               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#52373aca9b5595c73c5bbdc064171da0" title="The estimated accumulated Doppler range measurement standard deviation [cycles].">stdev_adr</a>     = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#dfb5f29d773a3712d186c10e228e03f7" title="The receiver estimated accumulated Doppler range measurement standard deviation [cycles]...">adrstd</a>; <span class="comment">// these are in cycles!.</span>
<a name="l00890"></a>00890 
<a name="l00891"></a>00891             <span class="keywordflow">if</span>( obsArray[i].adrstd &lt; 0.0001 )
<a name="l00892"></a>00892               <span class="keywordtype">int</span> gaa = 99;
<a name="l00893"></a>00893 
<a name="l00894"></a>00894             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#52373aca9b5595c73c5bbdc064171da0" title="The estimated accumulated Doppler range measurement standard deviation [cycles].">stdev_adr</a>     = 0.05f; <span class="comment">// these are in cycles!.</span>
<a name="l00895"></a>00895             
<a name="l00896"></a>00896             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#90981b957f709954341154f8a0de39e5" title="The estimated Doppler measurement standard deviation [Hz].">stdev_doppler</a> = 0.5f; <span class="comment">// Hz</span>
<a name="l00897"></a>00897 
<a name="l00898"></a>00898             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#81c6f521df1276e97be99b200acc9aba" title="The carrier smoothed pseudorange if available [m].">psr_smoothed</a>      = 0.0;
<a name="l00899"></a>00899             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#00aa42a6f1d5778847365d5d33620f2f" title="The predicted pseudorange based on the satellite position, user position, and current...">psr_predicted</a>     = 0.0;
<a name="l00900"></a>00900             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#b0b239a65dcd5bc48c3ca3c6e6c53f53" title="The predicted Doppler based on user position, velocity, satellite position, velocity...">doppler_predicted</a> = 0.0;
<a name="l00901"></a>00901             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#40d6dd5c3cb32b59bf71914ed483c93f" title="The associated satellite azimuth for this channel [rad].">azimuthRads</a>       = 0.0;
<a name="l00902"></a>00902             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#278ef5a50837649246bfc52d0332a5ed" title="The associated satellite elevation for this channel [rad].">elevationRads</a>     = 0.0;
<a name="l00903"></a>00903 
<a name="l00904"></a>00904             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#18bf0e63b74f2b57169f27f7047c5822" title="This flag indicates that the channel is active for use. If this is not set, no other...">isActive</a> = 1;
<a name="l00905"></a>00905             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#88d27726352158c2c0c1b92526674b1f" title="Indicates if the code tracking is locked.">isCodeLocked</a>   = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#290deea5077971611207b3c0fc3a6a9a" title="Is the channel code locked (TRUE/FALSE)? The pseudorange is invalid if FALSE.">isCodeLocked</a>;
<a name="l00906"></a>00906             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f0a893d2f4449d8706dbf1fe95a9832f" title="Indicates if the phase tracking is locked.">isPhaseLocked</a>  = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#1597a9ad4a75c97f707c42be17052efc" title="Is the channel phase locked (TRUE/FALSE)?">isPhaseLocked</a>;
<a name="l00907"></a>00907             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f6ea0b09a7a2a65d5f17eedb84d318c8" title="Indicates if the phase parity if valid.">isParityValid</a>  = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#93b47d645baff35fb7aacaf898b799a4" title="Is the parity known (TRUE/FALSE)? if not there is a possible 1/2 cycle ambiguity...">isParityKnown</a>;
<a name="l00908"></a>00908             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#debf131e77ab42e3660fe39a2f5edfb2" title="Indicates if the pseudorange valid for use.">isPsrValid</a>     = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#290deea5077971611207b3c0fc3a6a9a" title="Is the channel code locked (TRUE/FALSE)? The pseudorange is invalid if FALSE.">isCodeLocked</a>;
<a name="l00909"></a>00909             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#ec8b2195040e075f6d53bdd24f62349b" title="Indicates if the ADR is valid for use.">isAdrValid</a>     = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#1597a9ad4a75c97f707c42be17052efc" title="Is the channel phase locked (TRUE/FALSE)?">isPhaseLocked</a> &amp; obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#93b47d645baff35fb7aacaf898b799a4" title="Is the parity known (TRUE/FALSE)? if not there is a possible 1/2 cycle ambiguity...">isParityKnown</a>;
<a name="l00910"></a>00910             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#9c02ba397b6907abac93a5e4d03cdf7d" title="Indicates if the Doppler if valid for use.">isDopplerValid</a> = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#290deea5077971611207b3c0fc3a6a9a" title="Is the channel code locked (TRUE/FALSE)? The pseudorange is invalid if FALSE.">isCodeLocked</a>;            
<a name="l00911"></a>00911             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#0503bf25098b47aeab0908ba172af2c3" title="Indicates if this channel has another associated channel. eg. L1 and L2 measurements...">isGrouped</a>      = obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#0c403f5f3aac8d30bfad5ef972d98a77" title="Is this measurement grouped (TRUE/FALSE)? e.g. tracking L1 &amp;amp; L2 for a single...">isGrouped</a>;
<a name="l00912"></a>00912             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#0d016c0764be95940ea288d9470152e0" title="Indicates if the channel was receiver assigned (otherwise, the user forced this channel...">isAutoAssigned</a> = !obsArray[i].<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_observation.html#630dd50be3b4a5c89a541b8c18c8351e" title="The decoded channel tracking status information.">trackingStatus</a>.<a class="code" href="struct_n_o_v_a_t_e_l_o_e_m4__struct_tracking_status.html#78ed5c375133de5aeb2c228d42c9c397" title="Is this channel forced to track this PRN by the user (TRUE/FALSE)?">isForcedAssignment</a>;
<a name="l00913"></a>00913             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#783ef8ff3487c78005fb07eb7639f908" title="Indicates if the pseudorange has carrier smoothing enabled.">isCarrierSmoothed</a>     = 0; <span class="comment">// not yet known</span>
<a name="l00914"></a>00914 
<a name="l00915"></a>00915             <span class="comment">// Check if ephemeris information is available</span>
<a name="l00916"></a>00916             <span class="keywordflow">if</span>( !<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e1ebe924a0caf517716eb44ad3d13e6a" title="Check if ephemeris information is available for a PRN.">IsEphemerisAvailable</a>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e4367fe223cf9cac34e04403c482777f" title="The unique id for this channel (eg PRN for GPS).">id</a>, isAvailable ) )
<a name="l00917"></a>00917               <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00918"></a>00918 
<a name="l00919"></a>00919             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#7c1ee49f4083b57c2b6b4b777155e544" title="Indicates if this channel has valid associated ephemeris information.">isEphemerisValid</a>      = isAvailable;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#e1f02672c22f6d85e6034f79bf19a2c2" title="Indicates if this channel has valid associated almanac information.">isAlmanacValid</a>          = 0; <span class="comment">// not yet known</span>
<a name="l00922"></a>00922             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#88243c0743264334a92a2bd6e09f130a" title="Indicates if the satellite tracked is above the elevation mask.">isAboveElevationMask</a>    = 0; <span class="comment">// not yet known</span>
<a name="l00923"></a>00923             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#30028d506d8f09a9fe17b0855efe9740" title="Indciates if the channel&amp;#39;s C/No is above a threshold value.">isAboveCNoMask</a>          = 0; <span class="comment">// not yet known</span>
<a name="l00924"></a>00924             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#83c4d92919fc6c6e9f808344f0cf9504" title="Indicates if the channel&amp;#39;s locktime is above a treshold value.">isAboveLockTimeMask</a>     = 0; <span class="comment">// not yet known</span>
<a name="l00925"></a>00925             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#1479fd98d8b551129ceff6d5fadcc508" title="Indicates if the user has not forced the rejection of this channel or PRN.">isNotUserRejected</a>       = 1; <span class="comment">// assume not rejected</span>
<a name="l00926"></a>00926             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#8b39c860ca34ff689f27dd5575d263bd" title="Indicates if the pseudorange was not rejetced (ie Fault Detection and Exclusion)...">isNotPsrRejected</a>        = 1; <span class="comment">// assume not rejected</span>
<a name="l00927"></a>00927             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#c801fbbcf3053b6743bc09a643d11268" title="Indicates if the ADR was not rejetced (ie Fault Detection and Exclusion).">isNotAdrRejected</a>        = 1; <span class="comment">// assume not rejected</span>
<a name="l00928"></a>00928             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#04e5e32a6b3f117c0c64b9b74d67a4f0" title="Indicates if the Doppler was not rejected (ie Fault Detection and Exclusion).">isNotDopplerRejected</a>    = 1; <span class="comment">// assume not rejected</span>
<a name="l00929"></a>00929             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#694f3b3b651fa20549905385ac76d056" title="Indicates that no cycle slip has occurred at this epoch.">isNoCycleSlipDetected</a>   = 1; <span class="comment">// assume no slip</span>
<a name="l00930"></a>00930             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f11cc7afabed41a462850d1700f97da0" title="Indicates if some part (pseudorange) of this channel&amp;#39;s measurement was used in...">isPsrUsedInSolution</a>     = 0; <span class="comment">// not yet known</span>
<a name="l00931"></a>00931             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#e1fbeaa4138dd7cd107fe097c156666c" title="Indicates if some part (Doppler) of this channel&amp;#39;s measurement was used in the...">isDopplerUsedInSolution</a> = 0; <span class="comment">// not yet known</span>
<a name="l00932"></a>00932             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#9c7590df7fdcda9e0c7ee15e3b5c7133" title="Indicates if the the ADR is used in the solution.">isAdrUsedInSolution</a>     = 0; <span class="comment">// not yet known</span>
<a name="l00933"></a>00933 
<a name="l00934"></a>00934             <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c91e2af83e0075c8890d0ccd50f5850f" title="A boolean to indicate if the tropospheric correction is to be disabled for all satellites...">m_DisableTropoCorrection</a> )
<a name="l00935"></a>00935               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#377dbe1d8ec2bcf14bdbccb8f626dfa1" title="Indicates that the tropospheric correction should be applied.">useTropoCorrection</a>          = 0;
<a name="l00936"></a>00936             <span class="keywordflow">else</span>
<a name="l00937"></a>00937               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#377dbe1d8ec2bcf14bdbccb8f626dfa1" title="Indicates that the tropospheric correction should be applied.">useTropoCorrection</a>          = 1; <span class="comment">// defaults to yes</span>
<a name="l00938"></a>00938 
<a name="l00939"></a>00939             <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fb0953b2127f3bacfdccbcdcb3c371b0" title="A boolean to indicate if the ionospheric correction is to be disabled for all satellites...">m_DisableIonoCorrection</a> )
<a name="l00940"></a>00940               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#bb12e5e7e0c3973bd86ad509bd6c50a1" title="Indicates that the broadcast ionospheric correction should be applied.">useBroadcastIonoCorrection</a>  = 0;
<a name="l00941"></a>00941             <span class="keywordflow">else</span>
<a name="l00942"></a>00942               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#bb12e5e7e0c3973bd86ad509bd6c50a1" title="Indicates that the broadcast ionospheric correction should be applied.">useBroadcastIonoCorrection</a>  = 1; <span class="comment">// default to yes</span>
<a name="l00943"></a>00943             
<a name="l00944"></a>00944             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#3f704375d273a2b1707611cbad74cf8d" title="Tropospheric dry delay correction (+ve is a delay) [m].">prcTropoDry</a> = 0;
<a name="l00945"></a>00945             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#76872a0abc70074f5bc8a7075a1f5e78" title="Tropospheric wet delay correction (+ve is a delay) [m].">prcTropoWet</a> = 0;
<a name="l00946"></a>00946             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#6e523a076b297afca1742c7ff6fcb877" title="Ionospheric correction (+ve is a delay) [m].">prcIono</a> = 0;
<a name="l00947"></a>00947             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#8af20cb4ca0596101a4dd14ca5119689" title="The satellite clock correction (+ve is a delay) [m].">prcSatClk</a> = 0;
<a name="l00948"></a>00948             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#0d9c70339b04974bd9d935028d6df9f7" title="A reserved range correction for the pseudorange [m].">prcReserved1</a> = 0;
<a name="l00949"></a>00949             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#49e887c4878bd8e68599d9e637182b03" title="A reserved range correction for the pseudorange [m].">prcReserved2</a> = 0;
<a name="l00950"></a>00950             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#c5ab44842dcf9f75079ee412bda985cc" title="The satellite clock drift rate correction (+ve is a rate delay) [m/s].">rrcSatClkDrift</a> = 0;
<a name="l00951"></a>00951             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#4fdfaa112e6932754a86f192e440a39e" title="A reserved range rate correction [m/s].">rrcReserved1</a> = 0;
<a name="l00952"></a>00952             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#9b1a8429bd1cdb99dd1b1663b95eb4d0" title="A reserved range rate correction [m/s].">rrcReserved2</a> = 0;
<a name="l00953"></a>00953             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#6aa411ab7b1e14b3e30edd27235abc33" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dX</a> = 0;
<a name="l00954"></a>00954             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#b23dbc3ec3ccea590be685bb1c70619b" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dY</a> = 0;
<a name="l00955"></a>00955             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#ee9fb3ff0b0b8fc53ed6558c96c35453" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dZ</a> = 0;
<a name="l00956"></a>00956             
<a name="l00957"></a>00957             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#56e48defd40d43366f98eb42facb1583" title="The pseudorange residual [m].">psrResidual</a> = 0;
<a name="l00958"></a>00958             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#106a9bfb79109796d9225ad70c0b3f89" title="The accumulated Doppler range residual [cycles].">adrResidual</a> = 0;
<a name="l00959"></a>00959             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#86e5e7d73ffe16f3bff463b24a4dbfb1" title="The Doppler residual [Hz].">dopplerResidual</a> = 0;
<a name="l00960"></a>00960             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#107e0c59d9f480cfbfe61afbb9bb565b" title="Reserved value.">reserved</a> = 0;
<a name="l00961"></a>00961 
<a name="l00962"></a>00962             m_nrValidObs++;
<a name="l00963"></a>00963           }
<a name="l00964"></a>00964           
<a name="l00965"></a>00965         }
<a name="l00966"></a>00966         <span class="keywordflow">if</span>( wasEndOfFileReached )
<a name="l00967"></a>00967         {
<a name="l00968"></a>00968           endOfStream = <span class="keyword">true</span>;
<a name="l00969"></a>00969         }
<a name="l00970"></a>00970         <span class="keywordflow">break</span>;
<a name="l00971"></a>00971       }
<a name="l00972"></a>00972     <span class="keywordflow">default</span>:
<a name="l00973"></a>00973       {
<a name="l00974"></a>00974         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00975"></a>00975       }
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977 
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     <span class="comment">// Search for matching observations in the previous set of data to pass on static information</span>
<a name="l00980"></a>00980     <span class="comment">// like ambiguities.</span>
<a name="l00981"></a>00981     <span class="keywordflow">for</span>( i = 0; i &lt; m_nrValidObs; i++ )
<a name="l00982"></a>00982     {
<a name="l00983"></a>00983       <span class="keywordflow">for</span>( j = 0; j &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2e558431e77eacdf1050d3b9837b8b2" title="The number of usable items in m_prevObsArray.">m_prev_nrValidObs</a>; j++ )
<a name="l00984"></a>00984       {
<a name="l00985"></a>00985         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].codeType == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].codeType &amp;&amp;
<a name="l00986"></a>00986           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].freqType &amp;&amp;
<a name="l00987"></a>00987           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].system &amp;&amp;
<a name="l00988"></a>00988           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<span class="keywordtype">id</span> == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<span class="keywordtype">id</span> ) <span class="comment">// Note should also check that channels are the same if real time!</span>
<a name="l00989"></a>00989         {
<a name="l00990"></a>00990           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#dd1c0378e3fe7d366c721c796bf1de9e" title="The estimated integer component of the adr. This may be the single or double differenced...">ambiguity</a> = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#dd1c0378e3fe7d366c721c796bf1de9e" title="The estimated integer component of the adr. This may be the single or double differenced...">ambiguity</a>;
<a name="l00991"></a>00991           <span class="keywordflow">break</span>;
<a name="l00992"></a>00992         }
<a name="l00993"></a>00993       }
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995 
<a name="l00996"></a>00996 
<a name="l00997"></a>00997     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00998"></a>00998   }
<a name="l00999"></a>00999 
<a name="l01000"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fcc47d5db73111d6ede0598eed55c46a">01000</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fcc47d5db73111d6ede0598eed55c46a" title="Set the initial receiver position, velocity, and time.">GNSS_RxData::SetInitialPVT</a>( 
<a name="l01001"></a>01001     <span class="keyword">const</span> <span class="keywordtype">double</span> latitudeRads,   <span class="comment">//!&lt; The latitude [rad].</span>
<a name="l01002"></a>01002 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> longitudeRads,  <span class="comment">//!&lt; The longitude [rad].</span>
<a name="l01003"></a>01003 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> height,         <span class="comment">//!&lt; The orthometric height [m].</span>
<a name="l01004"></a>01004 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> vn,             <span class="comment">//!&lt; The northing velocity [m/s].</span>
<a name="l01005"></a>01005 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> ve,             <span class="comment">//!&lt; The easting velocity [m/s].</span>
<a name="l01006"></a>01006 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> vup,            <span class="comment">//!&lt; The up velocity [m/s].</span>
<a name="l01007"></a>01007 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> clk,            <span class="comment">//!&lt; The clock offset [m].</span>
<a name="l01008"></a>01008 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> clkdrift,       <span class="comment">//!&lt; The clock drift [m/s].</span>
<a name="l01009"></a>01009 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_lat,        <span class="comment">//!&lt; The standard deviation uncertainty in the latitude [m].</span>
<a name="l01010"></a>01010 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_lon,        <span class="comment">//!&lt; The standard deviation uncertainty in the longitude [m].</span>
<a name="l01011"></a>01011 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_hgt,        <span class="comment">//!&lt; The standard deviation uncertainty in the height [m].</span>
<a name="l01012"></a>01012 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_vn,         <span class="comment">//!&lt; The standard deviation uncertainty in the northing velocity [m/s].</span>
<a name="l01013"></a>01013 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_ve,         <span class="comment">//!&lt; The standard deviation uncertainty in the easting velocity [m/s].</span>
<a name="l01014"></a>01014 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_vup,        <span class="comment">//!&lt; The standard deviation uncertainty in the up velocity [m/s].</span>
<a name="l01015"></a>01015 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_clk,        <span class="comment">//!&lt; The standard deviation uncertainty in the clock offset [m].</span>
<a name="l01016"></a>01016 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_clkdrift,   <span class="comment">//!&lt; The standard deviation uncertainty in the clock drift [m/s].</span>
<a name="l01017"></a>01017 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> undulation      <span class="comment">//!&lt; The undulation if known [m].</span>
<a name="l01018"></a>01018 <span class="comment"></span>    )
<a name="l01019"></a>01019   {
<a name="l01020"></a>01020     <span class="keywordtype">bool</span> result;
<a name="l01021"></a>01021 
<a name="l01022"></a>01022     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#52a8d17635ab44c6add3566bc700a30f" title="Update the receiver position and clock offset.">UpdatePositionAndRxClock</a>(
<a name="l01023"></a>01023       latitudeRads,
<a name="l01024"></a>01024       longitudeRads,
<a name="l01025"></a>01025       height,
<a name="l01026"></a>01026       clk,
<a name="l01027"></a>01027       std_lat,
<a name="l01028"></a>01028       std_lon,
<a name="l01029"></a>01029       std_hgt,
<a name="l01030"></a>01030       std_clk );
<a name="l01031"></a>01031     <span class="keywordflow">if</span>( !result )
<a name="l01032"></a>01032       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01033"></a>01033 
<a name="l01034"></a>01034     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#41cd9f52d3cc745937c4832b3e4021d7" title="Update the receiver velocity and clock drift.">UpdateVelocityAndClockDrift</a>(
<a name="l01035"></a>01035       vn,
<a name="l01036"></a>01036       ve,
<a name="l01037"></a>01037       vup,
<a name="l01038"></a>01038       clkdrift,
<a name="l01039"></a>01039       std_vn,
<a name="l01040"></a>01040       std_ve,
<a name="l01041"></a>01041       std_vup,
<a name="l01042"></a>01042       std_clkdrift );
<a name="l01043"></a>01043     <span class="keywordflow">if</span>( !result )
<a name="l01044"></a>01044       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01045"></a>01045 
<a name="l01046"></a>01046     <span class="comment">//m_pvt.dop;     //!&lt; All the associated DOP information for this solution.</span>
<a name="l01047"></a>01047 
<a name="l01048"></a>01048     <span class="keywordflow">if</span>( std_lat == 0.0 &amp;&amp; std_lon == 0.0 &amp;&amp; std_hgt == 0.0 )
<a name="l01049"></a>01049     {
<a name="l01050"></a>01050       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#4ab8ea89bb17d624c14ae5b1950f6302" title="The standard deviation uncertainty in the latitude [m].">std_lat</a> = 1e-03;
<a name="l01051"></a>01051       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#db3aa8d0106c4ac9e311601e8ce54b2d" title="The standard deviation uncertainty in the longitude [m].">std_lon</a> = 1e-03;
<a name="l01052"></a>01052       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#448a07febf3f704ea648e9bcb961b84d" title="The standard deviation uncertainty in the height [m].">std_hgt</a> = 1e-03;      
<a name="l01053"></a>01053       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#84111f0fcdb1a890feb60f564b694beb" title="Is this a constrained position solution [TRUE(1),FALSE(0)].">isPositionConstrained</a> = 1;
<a name="l01054"></a>01054     }
<a name="l01055"></a>01055 
<a name="l01056"></a>01056     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#6463730ad688e9a177319b61ce7cd134" title="Is this a height constrained solution [TRUE(1),FALSE(0)].">isHeightConstrained</a> = 0;
<a name="l01057"></a>01057     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3e1326272f9484fb5ae6aef4fa24b1bb" title="Is this a clock constrained solution [TRUE(1),FALSE(0)].">isClockConstrained</a> = 0;
<a name="l01058"></a>01058     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#89097409177d089a7ebc99a82bf0bd86" title="Is the solution based on valid ephemeris information [TRUE(1),FALSE(0)].">isSolutionBasedOnEphemeris</a> = 0;
<a name="l01059"></a>01059 
<a name="l01060"></a>01060     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#56ca5857d9436afa950743bc7051bbf3" title="The undulation [m].">undulation</a> = undulation;
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="comment">// Set the previous pvt as well.</span>
<a name="l01063"></a>01063     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b5a4d70eb050a710917d2593c63c5392" title="The receiver&amp;#39;s previous position, velocity, and time information.">m_prev_pvt</a> = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>;
<a name="l01064"></a>01064     
<a name="l01065"></a>01065     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01066"></a>01066   }
<a name="l01067"></a>01067 
<a name="l01068"></a>01068 
<a name="l01069"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#52a8d17635ab44c6add3566bc700a30f">01069</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#52a8d17635ab44c6add3566bc700a30f" title="Update the receiver position and clock offset.">GNSS_RxData::UpdatePositionAndRxClock</a>( 
<a name="l01070"></a>01070     <span class="keyword">const</span> <span class="keywordtype">double</span> latitudeRads,   <span class="comment">//!&lt; The latitude [rad].</span>
<a name="l01071"></a>01071 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> longitudeRads,  <span class="comment">//!&lt; The longitude [rad].</span>
<a name="l01072"></a>01072 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> height,         <span class="comment">//!&lt; The orthometric height [m].</span>
<a name="l01073"></a>01073 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> clk,            <span class="comment">//!&lt; The clock offset [m].</span>
<a name="l01074"></a>01074 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_lat,        <span class="comment">//!&lt; The standard deviation uncertainty in the latitude [m].</span>
<a name="l01075"></a>01075 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_lon,        <span class="comment">//!&lt; The standard deviation uncertainty in the longitude [m].</span>
<a name="l01076"></a>01076 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_hgt,        <span class="comment">//!&lt; The standard deviation uncertainty in the height [m].</span>
<a name="l01077"></a>01077 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_clk         <span class="comment">//!&lt; The standard deviation uncertainty in the clock offset [m].</span>
<a name="l01078"></a>01078 <span class="comment"></span>    )
<a name="l01079"></a>01079   {
<a name="l01080"></a>01080     <span class="keywordtype">bool</span> result;
<a name="l01081"></a>01081     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#89414daaadfb175b4f2dd61481a9d603" title="The user latitude [rad].">latitude</a>   = latitudeRads;
<a name="l01082"></a>01082     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7edabfbb0ef7046ab0dcf5e4e44b3364" title="The user longitude [rad].">longitude</a>  = longitudeRads;
<a name="l01083"></a>01083     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1c8940c0284c37c083ae4d627c0e8ebf" title="The user orthometric height [m].">height</a>     = height;
<a name="l01084"></a>01084     
<a name="l01085"></a>01085     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#401611e17da6179e2aa38471e251247f" title="The user latitude [degrees].">latitudeDegs</a>  = latitudeRads*<a class="code" href="constants_8h.html#c5a945020d3528355cda82d383676736" title="180.0/PI">RAD2DEG</a>;
<a name="l01086"></a>01086     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#af00fb82a346dbcd91e24a365ad351b9" title="The user longitude [degrees].">longitudeDegs</a> = longitudeRads*RAD2DEG;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#97ffda549facdcaeb3fded67ea96fa8d" title="Get degrees, minutes, seconds from a decimal degrees angle.">GetDMS</a>( 
<a name="l01089"></a>01089       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#401611e17da6179e2aa38471e251247f" title="The user latitude [degrees].">latitudeDegs</a>, 
<a name="l01090"></a>01090       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#b5506746d38a9832df3cfd4c59bf3b89" title="The user latitude [dms].">lat_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#d047ea1409b1354db7c3e01670596b22" title="The degrees component [deg].">degrees</a>, 
<a name="l01091"></a>01091       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#b5506746d38a9832df3cfd4c59bf3b89" title="The user latitude [dms].">lat_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#1340efda1994ade4ab644775023c12c5" title="The minutes component [min].">minutes</a>, 
<a name="l01092"></a>01092       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#b5506746d38a9832df3cfd4c59bf3b89" title="The user latitude [dms].">lat_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#e0feaec8146c69255d31a8cc0bef066c" title="The seconds component [s].">seconds</a>, 
<a name="l01093"></a>01093       (<span class="keywordtype">char</span>*)<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#b5506746d38a9832df3cfd4c59bf3b89" title="The user latitude [dms].">lat_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#1ed9cfbe0e1fc6120ba59987d3e9bf3d" title="A DMS string e.g. dms_str = &amp;quot;-180&amp;#39;59&amp;#39;59.9999\&amp;quot;&amp;quot;.">dms_str</a>, 24 );
<a name="l01094"></a>01094     <span class="keywordflow">if</span>( result == <span class="keyword">false</span> )
<a name="l01095"></a>01095       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01096"></a>01096 
<a name="l01097"></a>01097     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#97ffda549facdcaeb3fded67ea96fa8d" title="Get degrees, minutes, seconds from a decimal degrees angle.">GetDMS</a>( 
<a name="l01098"></a>01098       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#af00fb82a346dbcd91e24a365ad351b9" title="The user longitude [degrees].">longitudeDegs</a>, 
<a name="l01099"></a>01099       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7b5c859ac083914efaf569c1438d2c85" title="The user longitude [dms].">lon_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#d047ea1409b1354db7c3e01670596b22" title="The degrees component [deg].">degrees</a>, 
<a name="l01100"></a>01100       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7b5c859ac083914efaf569c1438d2c85" title="The user longitude [dms].">lon_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#1340efda1994ade4ab644775023c12c5" title="The minutes component [min].">minutes</a>, 
<a name="l01101"></a>01101       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7b5c859ac083914efaf569c1438d2c85" title="The user longitude [dms].">lon_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#e0feaec8146c69255d31a8cc0bef066c" title="The seconds component [s].">seconds</a>, 
<a name="l01102"></a>01102       (<span class="keywordtype">char</span>*)<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7b5c859ac083914efaf569c1438d2c85" title="The user longitude [dms].">lon_dms</a>.<a class="code" href="struct_g_n_s_s__struct_d_m_s.html#1ed9cfbe0e1fc6120ba59987d3e9bf3d" title="A DMS string e.g. dms_str = &amp;quot;-180&amp;#39;59&amp;#39;59.9999\&amp;quot;&amp;quot;.">dms_str</a>, 24 );
<a name="l01103"></a>01103     <span class="keywordflow">if</span>( result == <span class="keyword">false</span> )
<a name="l01104"></a>01104       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106     <span class="keywordflow">if</span>( <a class="code" href="geodesy_8c.html#47075d6d68ed508277c77605d052dc16" title="This function converts curvilinear geodetic coordinates from latitude, longitude...">GEODESY_ConvertGeodeticCurvilinearToEarthFixedCartesianCoordinates</a>(
<a name="l01107"></a>01107       <a class="code" href="geodesy_8h.html#85892358ee81c1db6c2bdafffa2d282ce781aa9a001ff026b17367ff519a0deb" title="WGS84.">GEODESY_REFERENCE_ELLIPSE_WGS84</a>,
<a name="l01108"></a>01108       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#89414daaadfb175b4f2dd61481a9d603" title="The user latitude [rad].">latitude</a>,
<a name="l01109"></a>01109       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7edabfbb0ef7046ab0dcf5e4e44b3364" title="The user longitude [rad].">longitude</a>,
<a name="l01110"></a>01110       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1c8940c0284c37c083ae4d627c0e8ebf" title="The user orthometric height [m].">height</a>,
<a name="l01111"></a>01111       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#cd902db84bf399c50bdfa7937f1b9344" title="The user&amp;#39;s ECEF position, X [m].">x</a>,
<a name="l01112"></a>01112       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#78f74521a02cd816c012209b565af06d" title="The user&amp;#39;s ECEF position, Y [m].">y</a>,
<a name="l01113"></a>01113       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#84dfd5852ab0e4fbac90026b6fb9aaf7" title="The user&amp;#39;s ECEF position, Z [m].">z</a> ) == FALSE )
<a name="l01114"></a>01114     {
<a name="l01115"></a>01115       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01116"></a>01116     }
<a name="l01117"></a>01117     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0d23dfbfc7d52ddf46217d1f19200e93" title="The receiver clock offset [m].">clockOffset</a> = clk;
<a name="l01118"></a>01118 
<a name="l01119"></a>01119     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#4ab8ea89bb17d624c14ae5b1950f6302" title="The standard deviation uncertainty in the latitude [m].">std_lat</a> = std_lat;
<a name="l01120"></a>01120     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#db3aa8d0106c4ac9e311601e8ce54b2d" title="The standard deviation uncertainty in the longitude [m].">std_lon</a> = std_lon;
<a name="l01121"></a>01121     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#448a07febf3f704ea648e9bcb961b84d" title="The standard deviation uncertainty in the height [m].">std_hgt</a> = std_hgt;
<a name="l01122"></a>01122     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#03c054e5e63ae2e84fd61d9965d56ad5" title="The standard deviation uncertainty in the clock offset [m].">std_clk</a> = std_clk;
<a name="l01123"></a>01123     
<a name="l01124"></a>01124     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01125"></a>01125   }
<a name="l01126"></a>01126 
<a name="l01127"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#41cd9f52d3cc745937c4832b3e4021d7">01127</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#41cd9f52d3cc745937c4832b3e4021d7" title="Update the receiver velocity and clock drift.">GNSS_RxData::UpdateVelocityAndClockDrift</a>( 
<a name="l01128"></a>01128     <span class="keyword">const</span> <span class="keywordtype">double</span> vn,             <span class="comment">//!&lt; The northing velocity [m/s].</span>
<a name="l01129"></a>01129 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> ve,             <span class="comment">//!&lt; The easting velocity [m/s].</span>
<a name="l01130"></a>01130 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> vup,            <span class="comment">//!&lt; The up velocity [m/s].</span>
<a name="l01131"></a>01131 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> clkdrift,       <span class="comment">//!&lt; The clock drift [m/s].</span>
<a name="l01132"></a>01132 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_vn,         <span class="comment">//!&lt; The standard deviation uncertainty in the northing velocity [m/s].</span>
<a name="l01133"></a>01133 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_ve,         <span class="comment">//!&lt; The standard deviation uncertainty in the easting velocity [m/s].</span>
<a name="l01134"></a>01134 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_vup,        <span class="comment">//!&lt; The standard deviation uncertainty in the up velocity [m/s].</span>
<a name="l01135"></a>01135 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> std_clkdrift    <span class="comment">//!&lt; The standard deviation uncertainty in the clock drift [m/s].</span>
<a name="l01136"></a>01136 <span class="comment"></span>    )
<a name="l01137"></a>01137   {
<a name="l01138"></a>01138     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a>  = vn;
<a name="l01139"></a>01139     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a>  = ve;
<a name="l01140"></a>01140     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#5a83ebbee8c3fed5d9d8d7afcc5f78a6" title="The user&amp;#39;s local geodetic velocity, velocity Up [m/s].">vup</a> = vup;
<a name="l01141"></a>01141 
<a name="l01142"></a>01142     <a class="code" href="geodesy_8c.html#e23cfebded66ee36e7c5c0f206052035" title="Rotates a vector from a Local Geodetic Frame (LG) to and Earth Centered Earth Fixed...">GEODESY_RotateVectorFromLocalGeodeticFrameToEarthFixedFrame</a>(
<a name="l01143"></a>01143       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#89414daaadfb175b4f2dd61481a9d603" title="The user latitude [rad].">latitude</a>,
<a name="l01144"></a>01144       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7edabfbb0ef7046ab0dcf5e4e44b3364" title="The user longitude [rad].">longitude</a>,
<a name="l01145"></a>01145       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a>,
<a name="l01146"></a>01146       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a>,
<a name="l01147"></a>01147       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#5a83ebbee8c3fed5d9d8d7afcc5f78a6" title="The user&amp;#39;s local geodetic velocity, velocity Up [m/s].">vup</a>,
<a name="l01148"></a>01148       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#b2ce4552234051e654dc071e40d9b0be" title="The user&amp;#39;s ECEF velocity, vx [m/s].">vx</a>,
<a name="l01149"></a>01149       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#21166f77f7bb4b390dd6cef55399e0a5" title="The user&amp;#39;s ECEF velocity, vy [m/s].">vy</a>,
<a name="l01150"></a>01150       &amp;<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3cfa3475cec762ae58e2f522d63195d6" title="The user&amp;#39;s ECEF velocity, vz [m/s].">vz</a> );
<a name="l01151"></a>01151     
<a name="l01152"></a>01152     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#9f1866e1295558df7acad5acd5f0828e" title="the receiver clock drift [m/s].">clockDrift</a> = clkdrift;
<a name="l01153"></a>01153 
<a name="l01154"></a>01154     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#56c090de0d7d227f2eb49b615fbc0a0f" title="The standard deviation uncertainty in the northing velocity [m/s].">std_vn</a>  = std_vn;
<a name="l01155"></a>01155     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#2dc2d3f4f340d9b40e05320bf1b5622c" title="The standard deviation uncertainty in the easting velocity [m/s].">std_ve</a>  = std_ve;
<a name="l01156"></a>01156     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#130b9779523bba3837d090a2c07dcfe2" title="The standard deviation uncertainty in the up velocity [m/s].">std_vup</a> = std_vup;
<a name="l01157"></a>01157     <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#c8e54bca8e9c79d8e9ee29ddedb9d6f6" title="The standard deviation uncertainty in the clock drift [m/s].">std_clkdrift</a>  = std_clkdrift;
<a name="l01158"></a>01158 
<a name="l01159"></a>01159     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01160"></a>01160   }
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 
<a name="l01163"></a>01163 
<a name="l01164"></a>01164   <span class="comment">//static </span>
<a name="l01165"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#97ffda549facdcaeb3fded67ea96fa8d">01165</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#97ffda549facdcaeb3fded67ea96fa8d" title="Get degrees, minutes, seconds from a decimal degrees angle.">GNSS_RxData::GetDMS</a>( 
<a name="l01166"></a>01166     <span class="keyword">const</span> <span class="keywordtype">double</span> angleDegs,  <span class="comment">//!&lt; The angle [degrees].</span>
<a name="l01167"></a>01167 <span class="comment"></span>    <span class="keywordtype">short</span> &amp;degrees,          <span class="comment">//!&lt; The degrees part.</span>
<a name="l01168"></a>01168 <span class="comment"></span>    <span class="keywordtype">short</span> &amp;minutes,          <span class="comment">//!&lt; The minutes part.</span>
<a name="l01169"></a>01169 <span class="comment"></span>    <span class="keywordtype">float</span> &amp;seconds,          <span class="comment">//!&lt; The seconds part.</span>
<a name="l01170"></a>01170 <span class="comment"></span>    <span class="keywordtype">char</span> *dms_str,           <span class="comment">//!&lt; A DMS string e.g. dms_str = "-180'59'59.9999\""</span>
<a name="l01171"></a>01171 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> maxLength_dms_str <span class="comment">//!&lt; The maximum length of the dms_str string.</span>
<a name="l01172"></a>01172 <span class="comment"></span>    )
<a name="l01173"></a>01173   {
<a name="l01174"></a>01174     <span class="keywordtype">bool</span> isNegative = <span class="keyword">false</span>;
<a name="l01175"></a>01175     <span class="keywordtype">double</span> angle = angleDegs;
<a name="l01176"></a>01176     <span class="keywordtype">int</span> result = 0;
<a name="l01177"></a>01177 
<a name="l01178"></a>01178     <span class="keywordflow">if</span>( angleDegs &lt; 0 )
<a name="l01179"></a>01179     {
<a name="l01180"></a>01180       isNegative = <span class="keyword">true</span>;
<a name="l01181"></a>01181       angle = -angleDegs;
<a name="l01182"></a>01182     }
<a name="l01183"></a>01183     <span class="keywordflow">else</span>
<a name="l01184"></a>01184     {
<a name="l01185"></a>01185       angle = angleDegs;
<a name="l01186"></a>01186     }
<a name="l01187"></a>01187 
<a name="l01188"></a>01188     degrees = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span><span class="keyword">&gt;</span>(floor(angle));
<a name="l01189"></a>01189     minutes = <span class="keyword">static_cast&lt;</span><span class="keywordtype">short</span><span class="keyword">&gt;</span>(floor((angle - degrees)*60.0));
<a name="l01190"></a>01190     seconds = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>((angle - degrees - minutes/60.0)*3600.0);
<a name="l01191"></a>01191 
<a name="l01192"></a>01192     <span class="keywordflow">if</span>( isNegative )
<a name="l01193"></a>01193       degrees = -degrees;
<a name="l01194"></a>01194 
<a name="l01195"></a>01195 <span class="preprocessor">#ifndef _CRT_SECURE_NO_DEPRECATE</span>
<a name="l01196"></a>01196 <span class="preprocessor"></span>    result = sprintf_s( 
<a name="l01197"></a>01197       dms_str, 
<a name="l01198"></a>01198       maxLength_dms_str, 
<a name="l01199"></a>01199       <span class="stringliteral">"%+4d%c%02d\'%02.4f\""</span>, 
<a name="l01200"></a>01200       degrees, 
<a name="l01201"></a>01201       176, <span class="comment">// the degrees symbol</span>
<a name="l01202"></a>01202       minutes,
<a name="l01203"></a>01203       seconds );
<a name="l01204"></a>01204 <span class="preprocessor">#else</span>
<a name="l01205"></a>01205 <span class="preprocessor"></span>    result = sprintf( 
<a name="l01206"></a>01206       dms_str,     
<a name="l01207"></a>01207       <span class="stringliteral">"%+4d%c%02d\'%02.4f\""</span>, 
<a name="l01208"></a>01208       degrees, 
<a name="l01209"></a>01209       176, <span class="comment">// the degrees symbol</span>
<a name="l01210"></a>01210       minutes,
<a name="l01211"></a>01211       seconds );
<a name="l01212"></a>01212 <span class="preprocessor">#endif</span>
<a name="l01213"></a>01213 <span class="preprocessor"></span>
<a name="l01214"></a>01214     <span class="keywordflow">if</span>( result == -1 )
<a name="l01215"></a>01215       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01216"></a>01216 
<a name="l01217"></a>01217     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01218"></a>01218   }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220 
<a name="l01221"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#7275743ab490950179a0985e475c2ed8">01221</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#7275743ab490950179a0985e475c2ed8" title="Check for cycle slips using the phase rate prediction method.">GNSS_RxData::CheckForCycleSlips_UsingPhaseRatePrediction</a>( 
<a name="l01222"></a>01222     <span class="keyword">const</span> <span class="keywordtype">double</span> nrThresholdCycles <span class="comment">//!&lt; The maximum number of cycles to use as the threshold to detect a slip [cycles].</span>
<a name="l01223"></a>01223 <span class="comment"></span>    )
<a name="l01224"></a>01224   {
<a name="l01225"></a>01225     <span class="keywordtype">unsigned</span> i = 0;
<a name="l01226"></a>01226     <span class="keywordtype">unsigned</span> j = 0;
<a name="l01227"></a>01227     <span class="keywordtype">double</span> t_prev = 0.0;
<a name="l01228"></a>01228     <span class="keywordtype">double</span> t = 0.0;
<a name="l01229"></a>01229     <span class="keywordtype">double</span> dt = 0.0;
<a name="l01230"></a>01230     <span class="keywordtype">double</span> phase_diff = 0.0; <span class="comment">// The difference between the predicted phase and the measured phase.</span>
<a name="l01231"></a>01231     <span class="keywordtype">double</span> predicted_phase = 0.0;
<a name="l01232"></a>01232     <span class="keywordtype">double</span> mean_doppler = 0.0;
<a name="l01233"></a>01233 
<a name="l01234"></a>01234     <span class="keyword">static</span> <span class="keywordtype">double</span> max_dif = 0.0;
<a name="l01235"></a>01235 
<a name="l01236"></a>01236     t_prev = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b5a4d70eb050a710917d2593c63c5392" title="The receiver&amp;#39;s previous position, velocity, and time information.">m_prev_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a>*<a class="code" href="constants_8h.html#7e7087a54da1e633ceb9057a83bcbbec" title="[s]">SECONDS_IN_WEEK</a> + <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#b5a4d70eb050a710917d2593c63c5392" title="The receiver&amp;#39;s previous position, velocity, and time information.">m_prev_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a>;
<a name="l01237"></a>01237     t = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a>*<a class="code" href="constants_8h.html#7e7087a54da1e633ceb9057a83bcbbec" title="[s]">SECONDS_IN_WEEK</a> + <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a>;
<a name="l01238"></a>01238     dt = t - t_prev;
<a name="l01239"></a>01239     <span class="keywordflow">if</span>( dt &lt;= 0.0 )
<a name="l01240"></a>01240     {
<a name="l01241"></a>01241       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243     <span class="keywordflow">if</span>( dt &gt; 60.0 ) <span class="comment">// The phase rate prediction method is not going to work well.</span>
<a name="l01244"></a>01244     {
<a name="l01245"></a>01245       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01246"></a>01246     }
<a name="l01247"></a>01247             
<a name="l01248"></a>01248     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; i++ )
<a name="l01249"></a>01249     {
<a name="l01250"></a>01250       <span class="keywordflow">for</span>( j = 0; j &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#d2e558431e77eacdf1050d3b9837b8b2" title="The number of usable items in m_prevObsArray.">m_prev_nrValidObs</a>; j++ )
<a name="l01251"></a>01251       {
<a name="l01252"></a>01252         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].system &amp;&amp;
<a name="l01253"></a>01253           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<span class="keywordtype">id</span> == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<span class="keywordtype">id</span> &amp;&amp;
<a name="l01254"></a>01254           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].freqType )
<a name="l01255"></a>01255         {
<a name="l01256"></a>01256           <span class="comment">// channel matching is not perforned.</span>
<a name="l01257"></a>01257           <span class="comment">// This should be done if this a real time receiver data.</span>
<a name="l01258"></a>01258           <span class="comment">// However, since the data source is generally not known for</span>
<a name="l01259"></a>01259           <span class="comment">// post processing software, it is not performed here.</span>
<a name="l01260"></a>01260           <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].flags.isPhaseLocked &amp;&amp; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f0a893d2f4449d8706dbf1fe95a9832f" title="Indicates if the phase tracking is locked.">isPhaseLocked</a> )
<a name="l01261"></a>01261           {
<a name="l01262"></a>01262             mean_doppler = (<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#d17748cb4124c1fda281f13d3d6b5a91" title="The Doppler measurement for this channel [Hz].">doppler</a> + <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#d17748cb4124c1fda281f13d3d6b5a91" title="The Doppler measurement for this channel [Hz].">doppler</a>)/2.0;
<a name="l01263"></a>01263 
<a name="l01264"></a>01264             predicted_phase = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#764463f0eb40af483c056ba91cb1ebf5" title="The previous observation set.">m_prev_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#78d645c2da35340730a5b77ed3bf4b3d" title="The carrier phase or accumulated Doppler range measurement [cycles].">adr</a> - mean_doppler * dt; <span class="comment">// GDM_BEWARE Doppler sign convention</span>
<a name="l01265"></a>01265 
<a name="l01266"></a>01266             phase_diff = predicted_phase - <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#78d645c2da35340730a5b77ed3bf4b3d" title="The carrier phase or accumulated Doppler range measurement [cycles].">adr</a>;
<a name="l01267"></a>01267 
<a name="l01268"></a>01268             <span class="keywordflow">if</span>( fabs(phase_diff) &gt; max_dif )
<a name="l01269"></a>01269               max_dif = fabs(phase_diff);
<a name="l01270"></a>01270             <span class="keywordflow">if</span>( fabs(phase_diff) &gt; nrThresholdCycles )
<a name="l01271"></a>01271             {
<a name="l01272"></a>01272               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#694f3b3b651fa20549905385ac76d056" title="Indicates that no cycle slip has occurred at this epoch.">isNoCycleSlipDetected</a> = 0; <span class="comment">// Indicate a cycle slip has occured.</span>
<a name="l01273"></a>01273             }
<a name="l01274"></a>01274             <span class="keywordflow">else</span>
<a name="l01275"></a>01275             {
<a name="l01276"></a>01276               <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#694f3b3b651fa20549905385ac76d056" title="Indicates that no cycle slip has occurred at this epoch.">isNoCycleSlipDetected</a> = 1; <span class="comment">// No cycle slip detected.</span>
<a name="l01277"></a>01277             }
<a name="l01278"></a>01278             <span class="keywordflow">break</span>;
<a name="l01279"></a>01279           }
<a name="l01280"></a>01280         }
<a name="l01281"></a>01281       }
<a name="l01282"></a>01282     }
<a name="l01283"></a>01283 
<a name="l01284"></a>01284     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01285"></a>01285   }
<a name="l01286"></a>01286 
<a name="l01287"></a>01287 
<a name="l01288"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#469600cbc1ecc022912816d99c70010f">01288</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#469600cbc1ecc022912816d99c70010f" title="A debugging function for printing all of the observation array to a file.">GNSS_RxData::DebugPrintObservationArray</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#98fbdcdf4c7926e0671989583d146f49" title="The file path to the RINEX ephemeris data.">filepath</a> )
<a name="l01289"></a>01289   {
<a name="l01290"></a>01290     <span class="keywordtype">unsigned</span> i = 0;
<a name="l01291"></a>01291     <span class="keywordtype">unsigned</span> j = 0;
<a name="l01292"></a>01292     <a class="code" href="class_zenautics_1_1_matrix.html" title="The matrix/vector class. Both real and complex data are inherently supported. One...">Matrix</a> X(100,<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>);
<a name="l01293"></a>01293     
<a name="l01294"></a>01294     <span class="keywordflow">if</span>( filepath == NULL )
<a name="l01295"></a>01295       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01296"></a>01296 
<a name="l01297"></a>01297 
<a name="l01298"></a>01298     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; i++ )
<a name="l01299"></a>01299     {
<a name="l01300"></a>01300       j = 0;
<a name="l01301"></a>01301       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#5a1085d48f3ffcb922112b02813484a6" title="The channel number associated with this measurement.">channel</a>; j++;
<a name="l01302"></a>01302       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e4367fe223cf9cac34e04403c482777f" title="The unique id for this channel (eg PRN for GPS).">id</a>; j++;       <span class="comment">//!&lt; The unique id for this channel (eg PRN for GPS).    </span>
<a name="l01303"></a>01303 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#244a0b86badeb8ef8179b3f5153e89cd" title="The satellite system associated with this channel.">system</a>; j++;   <span class="comment">//!&lt; The satellite system associated with this channel.</span>
<a name="l01304"></a>01304 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#2ff4f65c5fab5291ac6c7bde4fe5015f" title="The code type for this channel.">codeType</a>; j++; <span class="comment">//!&lt; The code type for this channel.</span>
<a name="l01305"></a>01305 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#199091cdc428febb52547028670b27d4" title="The frequency type for this channel.">freqType</a>; j++; <span class="comment">//!&lt; The frequency type for this channel.</span>
<a name="l01306"></a>01306 <span class="comment"></span>
<a name="l01307"></a>01307       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#18bf0e63b74f2b57169f27f7047c5822" title="This flag indicates that the channel is active for use. If this is not set, no other...">isActive</a>; j++;              <span class="comment">//!&lt; This flag indicates that the channel is active for use. If this is not set, no other flags are valid for use.</span>
<a name="l01308"></a>01308 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#88d27726352158c2c0c1b92526674b1f" title="Indicates if the code tracking is locked.">isCodeLocked</a>; j++;          <span class="comment">//!&lt; Indicates if the code tracking is locked.</span>
<a name="l01309"></a>01309 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f0a893d2f4449d8706dbf1fe95a9832f" title="Indicates if the phase tracking is locked.">isPhaseLocked</a>; j++;         <span class="comment">//!&lt; Indicates if the phase tracking is locked.</span>
<a name="l01310"></a>01310 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f6ea0b09a7a2a65d5f17eedb84d318c8" title="Indicates if the phase parity if valid.">isParityValid</a>; j++;         <span class="comment">//!&lt; Indicates if the phase parity if valid.      </span>
<a name="l01311"></a>01311 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#debf131e77ab42e3660fe39a2f5edfb2" title="Indicates if the pseudorange valid for use.">isPsrValid</a>; j++;            <span class="comment">//!&lt; Indicates if the pseudorange valid for use.</span>
<a name="l01312"></a>01312 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#ec8b2195040e075f6d53bdd24f62349b" title="Indicates if the ADR is valid for use.">isAdrValid</a>; j++;            <span class="comment">//!&lt; Indicates if the ADR is valid for use.</span>
<a name="l01313"></a>01313 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#9c02ba397b6907abac93a5e4d03cdf7d" title="Indicates if the Doppler if valid for use.">isDopplerValid</a>; j++;        <span class="comment">//!&lt; Indicates if the Doppler if valid for use.</span>
<a name="l01314"></a>01314 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#0503bf25098b47aeab0908ba172af2c3" title="Indicates if this channel has another associated channel. eg. L1 and L2 measurements...">isGrouped</a>; j++;             <span class="comment">//!&lt; Indicates if this channel has another associated channel. eg. L1 and L2 measurements.</span>
<a name="l01315"></a>01315 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#0d016c0764be95940ea288d9470152e0" title="Indicates if the channel was receiver assigned (otherwise, the user forced this channel...">isAutoAssigned</a>; j++;        <span class="comment">//!&lt; Indicates if the channel was receiver assigned (otherwise, the user forced this channel assignment).</span>
<a name="l01316"></a>01316 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#783ef8ff3487c78005fb07eb7639f908" title="Indicates if the pseudorange has carrier smoothing enabled.">isCarrierSmoothed</a>; j++;     <span class="comment">//!&lt; Indicates if the pseudorange has carrier smoothing enabled.</span>
<a name="l01317"></a>01317 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#7c1ee49f4083b57c2b6b4b777155e544" title="Indicates if this channel has valid associated ephemeris information.">isEphemerisValid</a>; j++;      <span class="comment">//!&lt; Indicates if this channel has valid associated ephemeris information. </span>
<a name="l01318"></a>01318 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#e1f02672c22f6d85e6034f79bf19a2c2" title="Indicates if this channel has valid associated almanac information.">isAlmanacValid</a>; j++;        <span class="comment">//!&lt; Indicates if this channel has valid associated almanac information.</span>
<a name="l01319"></a>01319 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#88243c0743264334a92a2bd6e09f130a" title="Indicates if the satellite tracked is above the elevation mask.">isAboveElevationMask</a>; j++;  <span class="comment">//!&lt; Indicates if the satellite tracked is above the elevation mask.    </span>
<a name="l01320"></a>01320 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#30028d506d8f09a9fe17b0855efe9740" title="Indciates if the channel&amp;#39;s C/No is above a threshold value.">isAboveCNoMask</a>; j++;        <span class="comment">//!&lt; Indciates if the channel's C/No is above a threshold value.</span>
<a name="l01321"></a>01321 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#83c4d92919fc6c6e9f808344f0cf9504" title="Indicates if the channel&amp;#39;s locktime is above a treshold value.">isAboveLockTimeMask</a>; j++;   <span class="comment">//!&lt; Indicates if the channel's locktime is above a treshold value.</span>
<a name="l01322"></a>01322 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#1479fd98d8b551129ceff6d5fadcc508" title="Indicates if the user has not forced the rejection of this channel or PRN.">isNotUserRejected</a>; j++;     <span class="comment">//!&lt; Indicates if the user has not forced the rejection of this channel or PRN.</span>
<a name="l01323"></a>01323 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#8b39c860ca34ff689f27dd5575d263bd" title="Indicates if the pseudorange was not rejetced (ie Fault Detection and Exclusion)...">isNotPsrRejected</a>; j++;      <span class="comment">//!&lt; Indicates if the pseudorange was not rejetced (ie Fault Detection and Exclusion).</span>
<a name="l01324"></a>01324 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#c801fbbcf3053b6743bc09a643d11268" title="Indicates if the ADR was not rejetced (ie Fault Detection and Exclusion).">isNotAdrRejected</a>; j++;      <span class="comment">//!&lt; Indicates if the ADR was not rejetced (ie Fault Detection and Exclusion).</span>
<a name="l01325"></a>01325 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#04e5e32a6b3f117c0c64b9b74d67a4f0" title="Indicates if the Doppler was not rejected (ie Fault Detection and Exclusion).">isNotDopplerRejected</a>; j++;  <span class="comment">//!&lt; Indicates if the Doppler was not rejected (ie Fault Detection and Exclusion).</span>
<a name="l01326"></a>01326 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#694f3b3b651fa20549905385ac76d056" title="Indicates that no cycle slip has occurred at this epoch.">isNoCycleSlipDetected</a>; j++; <span class="comment">//!&lt; Indicates that no cycle slip has occurred at this epoch.</span>
<a name="l01327"></a>01327 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#f11cc7afabed41a462850d1700f97da0" title="Indicates if some part (pseudorange) of this channel&amp;#39;s measurement was used in...">isPsrUsedInSolution</a>; j++;   <span class="comment">//!&lt; Indicates if some part (pseudorange) of this channel's measurement was used in the position solution.</span>
<a name="l01328"></a>01328 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#e1fbeaa4138dd7cd107fe097c156666c" title="Indicates if some part (Doppler) of this channel&amp;#39;s measurement was used in the...">isDopplerUsedInSolution</a>; j++;   <span class="comment">//!&lt; Indicates if some part (Doppler) of this channel's measurement was used in the velocity solution.</span>
<a name="l01329"></a>01329 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#9c7590df7fdcda9e0c7ee15e3b5c7133" title="Indicates if the the ADR is used in the solution.">isAdrUsedInSolution</a>; j++;   <span class="comment">//!&lt; Indicates if the the ADR is used in the solution.</span>
<a name="l01330"></a>01330 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#63e0d70fc41d389ce2479083a3b2bd7c" title="Indicates if a matching pseudrange observation is available from another receiver...">isDifferentialPsrAvailable</a>; j++;     <span class="comment">//!&lt; Indicates if a matching pseudrange observation is available from another receiver.</span>
<a name="l01331"></a>01331 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#3678bf6cad731631735ca2c6e0e7ae87" title="Indicates if a matching Doppler observation is available from another receiver.">isDifferentialDopplerAvailable</a>; j++; <span class="comment">//!&lt; Indicates if a matching Doppler observation is available from another receiver.</span>
<a name="l01332"></a>01332 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#c9011df7033742cfcdcf08d1f70ce106" title="Indicates if a matching ADR observation is available from another receiver.">isDifferentialAdrAvailable</a>; j++;     <span class="comment">//!&lt; Indicates if a matching ADR observation is available from another receiver.</span>
<a name="l01333"></a>01333 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#377dbe1d8ec2bcf14bdbccb8f626dfa1" title="Indicates that the tropospheric correction should be applied.">useTropoCorrection</a>; j++;         <span class="comment">//!&lt; Indicates that the tropospheric correction should be applied.</span>
<a name="l01334"></a>01334 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#bb12e5e7e0c3973bd86ad509bd6c50a1" title="Indicates that the broadcast ionospheric correction should be applied.">useBroadcastIonoCorrection</a>; j++; <span class="comment">//!&lt; Indicates that the broadcast ionospheric correction should be applied.</span>
<a name="l01335"></a>01335 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#c2e82c4801d2c16164edbfb0482fde68">isTimeDifferntialPsrAvailable</a>; j++;
<a name="l01336"></a>01336       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#97f5772c029208e47daf5c4ee5294cac">isTimeDifferntialDopplerAvailable</a>; j++;
<a name="l01337"></a>01337 
<a name="l01338"></a>01338       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#73a4f8747fc242ae62fff34a5ad6c9de" title="The measurement gps week (at &amp;#39;transmit&amp;#39; time) [weeks].">week</a>; j++;  <span class="comment">//!&lt; The measurement gps week (at 'transmit' time) [weeks].</span>
<a name="l01339"></a>01339 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#2c4593ed5b87f0185ffa9d779299ed31" title="The measurement gps time of week (at &amp;#39;transmit&amp;#39; time) [s].">tow</a>; j++;   <span class="comment">//!&lt; The measurement gps time of week (at 'transmit' time) [s].</span>
<a name="l01340"></a>01340 <span class="comment"></span>
<a name="l01341"></a>01341       <span class="comment">// The actual measurements.</span>
<a name="l01342"></a>01342       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#f477a43003a4a606d75dfaaeaa9e2830" title="The pseudorange measurement [m].">psr</a>; j++;               <span class="comment">//!&lt; The pseudorange measurement [m].</span>
<a name="l01343"></a>01343 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#78d645c2da35340730a5b77ed3bf4b3d" title="The carrier phase or accumulated Doppler range measurement [cycles].">adr</a>; j++;               <span class="comment">//!&lt; The carrier phase or accumulated Doppler range measurement [cycles].</span>
<a name="l01344"></a>01344 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#d17748cb4124c1fda281f13d3d6b5a91" title="The Doppler measurement for this channel [Hz].">doppler</a>; j++;           <span class="comment">//!&lt; The Doppler measurement for this channel [Hz].</span>
<a name="l01345"></a>01345 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ce29dce448b7e9b61f6fd9f01f61e372" title="The carrier to noise density ratio for this channel [dB-Hz].">cno</a>; j++;               <span class="comment">//!&lt; The carrier to noise density ratio for this channel [dB-Hz]</span>
<a name="l01346"></a>01346 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#9d089b104a004d3d9be16b82721de568" title="The number of seconds of continous phase tracking (no known cycle slips) [s].">locktime</a>; j++;          <span class="comment">//!&lt; The number of seconds of continous phase tracking (no known cycle slips) [s].</span>
<a name="l01347"></a>01347 <span class="comment"></span>
<a name="l01348"></a>01348       <span class="comment">// The variance information associated with the actual measurements.</span>
<a name="l01349"></a>01349       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e6aaf53ed5327566b8e004a526c87b10" title="The estimated pseudorange measurement standard deviation [m].">stdev_psr</a>; j++;         <span class="comment">//!&lt; The estimated pseudorange measurement standard deviation [m].</span>
<a name="l01350"></a>01350 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#52373aca9b5595c73c5bbdc064171da0" title="The estimated accumulated Doppler range measurement standard deviation [cycles].">stdev_adr</a>; j++;         <span class="comment">//!&lt; The estimated accumulated Doppler range measurement standard deviation [cycles].</span>
<a name="l01351"></a>01351 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#90981b957f709954341154f8a0de39e5" title="The estimated Doppler measurement standard deviation [Hz].">stdev_doppler</a>; j++;     <span class="comment">//!&lt; The estimated Doppler measurement standard deviation [Hz].</span>
<a name="l01352"></a>01352 <span class="comment"></span>
<a name="l01353"></a>01353       <span class="comment">// Derived information.</span>
<a name="l01354"></a>01354       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#3d0b0afbcd0fb06da206845948238b36" title="The measured psr minus the computed psr estimate [m].">psr_misclosure</a>; j++;    <span class="comment">//!&lt; The measured psr minus the computed psr estimate [m].</span>
<a name="l01355"></a>01355 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e2d1d7bcb0345c92c218041c3329fa6a" title="The measured Doppler minus the computed Doppler estimate [m].">doppler_misclosure</a>; j++;<span class="comment">//!&lt; The measured Doppler minus the computed Doppler estimate [m].</span>
<a name="l01356"></a>01356 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#cde4fd53714f49197b35bc5451d42f53" title="The best estimate of the geometric range between the antenna and the satellite [m]...">range</a>; j++;             <span class="comment">//!&lt; The best estimate of the geometric range between the antenna and the satellite [m].</span>
<a name="l01357"></a>01357 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ceb4cd99e340a9d092328009004ac692" title="The best estimate of the geometric range rate between the antenna and the satellite...">rangerate</a>; j++;         <span class="comment">//!&lt; The best estimate of the geometric range rate between the antenna and the satellite [m/s].</span>
<a name="l01358"></a>01358 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#81c6f521df1276e97be99b200acc9aba" title="The carrier smoothed pseudorange if available [m].">psr_smoothed</a>; j++;      <span class="comment">//!&lt; The carrier smoothed pseudorange if available [m].</span>
<a name="l01359"></a>01359 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#00aa42a6f1d5778847365d5d33620f2f" title="The predicted pseudorange based on the satellite position, user position, and current...">psr_predicted</a>; j++;     <span class="comment">//!&lt; The predicted pseudorange based on the satellite position, user position, and current clock offset [m].</span>
<a name="l01360"></a>01360 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#dd1c0378e3fe7d366c721c796bf1de9e" title="The estimated integer component of the adr. This may be the single or double differenced...">ambiguity</a>; j++;         <span class="comment">//!&lt; The estimated integer component of the adr. This may be the single or double differenced ambiguity [].</span>
<a name="l01361"></a>01361 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#b0b239a65dcd5bc48c3ca3c6e6c53f53" title="The predicted Doppler based on user position, velocity, satellite position, velocity...">doppler_predicted</a>; j++; <span class="comment">//!&lt; The predicted Doppler based on user position, velocity, satellite position, velocity and clock rate [Hz].</span>
<a name="l01362"></a>01362 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#40d6dd5c3cb32b59bf71914ed483c93f" title="The associated satellite azimuth for this channel [rad].">azimuthRads</a>; j++;       <span class="comment">//!&lt; The associated satellite azimuth for this channel [rad].</span>
<a name="l01363"></a>01363 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#278ef5a50837649246bfc52d0332a5ed" title="The associated satellite elevation for this channel [rad].">elevationRads</a>; j++;     <span class="comment">//!&lt; The associated satellite elevation for this channel  [rad].</span>
<a name="l01364"></a>01364 <span class="comment"></span>
<a name="l01365"></a>01365 
<a name="l01366"></a>01366       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#82546f114c2f082fb0946c912472f340" title="The channel index of a matching differential observation. -1 means there is no matching...">index_differential</a>; j++;      <span class="comment">//!&lt; The channel index of a matching differential observation. -1 means there is no matching channel.</span>
<a name="l01367"></a>01367 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#371790108264d531203d665635e55199" title="The channel index of a matching time differential observation. -1 means there is...">index_time_differential</a>; j++; <span class="comment">//!&lt; The channel index of a matching time differential observation. -1 means there is no matching channel.</span>
<a name="l01368"></a>01368 <span class="comment"></span>
<a name="l01369"></a>01369       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ce612ca4ab5c97fb4432734eb3669089" title="The index into the state vector for this ambiguity state. -1 not estimated.">index_ambiguity_state</a>; j++;   <span class="comment">//!&lt; The index into the state vector for this ambiguity state. -1 not estimated.</span>
<a name="l01370"></a>01370 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7f280c81b373819a28026a9dfa64dc0b" title="The measured ADR minus the computed ADR estimate [m]. This is likely a differential...">adr_misclosure</a>; j++;          <span class="comment">//!&lt; The measured ADR minus the computed ADR estimate [m]. This is likely a differential quantity.</span>
<a name="l01371"></a>01371 <span class="comment"></span>
<a name="l01372"></a>01372       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#59ca202451219e8394fb4daa622d53e6" title="The design matrix row relating the pseudorange measurements to the position solution...">H_p</a>[0]; j++; <span class="comment">//!&lt; The design matrix row relating the pseudorange measurements to the position solution. dP/d(lat), dP/d(lon), dP/d(hgt).</span>
<a name="l01373"></a>01373 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#59ca202451219e8394fb4daa622d53e6" title="The design matrix row relating the pseudorange measurements to the position solution...">H_p</a>[1]; j++;
<a name="l01374"></a>01374       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#59ca202451219e8394fb4daa622d53e6" title="The design matrix row relating the pseudorange measurements to the position solution...">H_p</a>[2]; j++;
<a name="l01375"></a>01375       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#72fcaa3af4b528a9381d26385d0cecd4" title="The design matrix row relating the Doppler measurements to the velocity solution...">H_v</a>[0]; j++; <span class="comment">//!&lt; The design matrix row relating the Doppler measurements to the velocity solution. dD/d(lat), dD/d(lon), dD/d(hgt).</span>
<a name="l01376"></a>01376 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#72fcaa3af4b528a9381d26385d0cecd4" title="The design matrix row relating the Doppler measurements to the velocity solution...">H_v</a>[1]; j++;
<a name="l01377"></a>01377       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#72fcaa3af4b528a9381d26385d0cecd4" title="The design matrix row relating the Doppler measurements to the velocity solution...">H_v</a>[2]; j++;
<a name="l01378"></a>01378 
<a name="l01379"></a>01379       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#6aa411ab7b1e14b3e30edd27235abc33" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dX</a>; j++; <span class="comment">//!&lt; The corrections associated with this channel.</span>
<a name="l01380"></a>01380 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#b23dbc3ec3ccea590be685bb1c70619b" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dY</a>; j++;
<a name="l01381"></a>01381       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#ee9fb3ff0b0b8fc53ed6558c96c35453" title="This channel&amp;#39;s associated satellite orbital correction X (ECEF) [m].">dZ</a>; j++;
<a name="l01382"></a>01382       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#6e523a076b297afca1742c7ff6fcb877" title="Ionospheric correction (+ve is a delay) [m].">prcIono</a>; j++;
<a name="l01383"></a>01383       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#0d9c70339b04974bd9d935028d6df9f7" title="A reserved range correction for the pseudorange [m].">prcReserved1</a>; j++;
<a name="l01384"></a>01384       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#49e887c4878bd8e68599d9e637182b03" title="A reserved range correction for the pseudorange [m].">prcReserved2</a>; j++;
<a name="l01385"></a>01385       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#8af20cb4ca0596101a4dd14ca5119689" title="The satellite clock correction (+ve is a delay) [m].">prcSatClk</a>; j++;
<a name="l01386"></a>01386       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#3f704375d273a2b1707611cbad74cf8d" title="Tropospheric dry delay correction (+ve is a delay) [m].">prcTropoDry</a>; j++;
<a name="l01387"></a>01387       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#76872a0abc70074f5bc8a7075a1f5e78" title="Tropospheric wet delay correction (+ve is a delay) [m].">prcTropoWet</a>; j++;
<a name="l01388"></a>01388       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#7d040652d8fc8f6d9a0190c9f526827b" title="The corrections associated with this channel.">corrections</a>.<a class="code" href="struct_g_n_s_s__struct_corrections.html#4fdfaa112e6932754a86f192e440a39e" title="A reserved range rate correction [m/s].">rrcReserved1</a>; j++;
<a name="l01389"></a>01389 
<a name="l01390"></a>01390       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#56e48defd40d43366f98eb42facb1583" title="The pseudorange residual [m].">psrResidual</a>; j++;   <span class="comment">//!&lt; The post-adjustment (filtering) measurement residual associated with this channel.</span>
<a name="l01391"></a>01391 <span class="comment"></span>      X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#86e5e7d73ffe16f3bff463b24a4dbfb1" title="The Doppler residual [Hz].">dopplerResidual</a>; j++;
<a name="l01392"></a>01392       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#106a9bfb79109796d9225ad70c0b3f89" title="The accumulated Doppler range residual [cycles].">adrResidual</a>; j++;
<a name="l01393"></a>01393       X[j][i] = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#ee2835070574d7c0e46e633047c4d40a" title="The post-adjustment (filtering) measurement residual associated with this channel...">residuals</a>.<a class="code" href="struct_g_n_s_s__struct_residuals.html#107e0c59d9f480cfbfe61afbb9bb565b" title="Reserved value.">reserved</a>; j++;      
<a name="l01394"></a>01394     }
<a name="l01395"></a>01395     X.<a class="code" href="class_zenautics_1_1_matrix.html#e1edc4224321e864d2c47f456ee5301d" title="Redimension the matrix, original data is saved in place, new data is set to zero...">Redim</a>(j,m_nrValidObs);
<a name="l01396"></a>01396 
<a name="l01397"></a>01397     X.<a class="code" href="class_zenautics_1_1_matrix.html#6999a57a041a95998c6e769576686bdf" title="Print the matrix to a file with automatically determined column width and the specified...">Print</a>( filepath, 12 ); <span class="comment">// print to the file in append mode.</span>
<a name="l01398"></a>01398 
<a name="l01399"></a>01399     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01400"></a>01400   }
<a name="l01401"></a>01401 
<a name="l01402"></a>01402 
<a name="l01403"></a>01403 
<a name="l01404"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#08c6b4c291509c108b178ccf9e4e88cd">01404</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#08c6b4c291509c108b178ccf9e4e88cd" title="The number of bytes set in the buffer.">GNSS_RxData::Debug_WriteSuperMsg80CharsWide</a>(
<a name="l01405"></a>01405     <span class="keywordtype">char</span>* buffer,                    <span class="comment">//!&lt; A large character buffer (8KB min).</span>
<a name="l01406"></a>01406 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> maxBufferLength,  <span class="comment">//!&lt; The maximum buffer length [bytes].</span>
<a name="l01407"></a>01407 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> referenceLatitude,  <span class="comment">//!&lt; Reference position latitude [rad].</span>
<a name="l01408"></a>01408 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> referenceLongitude, <span class="comment">//!&lt; Reference position longitude [rad].</span>
<a name="l01409"></a>01409 <span class="comment"></span>    <span class="keyword">const</span> <span class="keywordtype">double</span> referenceHeight,    <span class="comment">//!&lt; Reference position height [m].</span>
<a name="l01410"></a>01410 <span class="comment"></span>    <span class="keywordtype">unsigned</span>&amp; nrBytesInBuffer )      <span class="comment">//!&lt; The number of bytes set in the buffer.</span>
<a name="l01411"></a>01411 <span class="comment"></span>  {
<a name="l01412"></a>01412     <span class="keywordtype">unsigned</span> i = 0;
<a name="l01413"></a>01413     <span class="keywordtype">unsigned</span> j = 0;
<a name="l01414"></a>01414     <span class="keywordtype">int</span> week = -1;
<a name="l01415"></a>01415     <span class="keywordtype">int</span> tmpi = 0;
<a name="l01416"></a>01416 
<a name="l01417"></a>01417     <span class="keywordtype">unsigned</span> scount = 0;
<a name="l01418"></a>01418 
<a name="l01419"></a>01419     <span class="keywordtype">double</span> x = 0;
<a name="l01420"></a>01420     <span class="keywordtype">double</span> y = 0;
<a name="l01421"></a>01421     <span class="keywordtype">double</span> z = 0;
<a name="l01422"></a>01422 
<a name="l01423"></a>01423     <span class="keywordtype">double</span> n_err  = 0.0;
<a name="l01424"></a>01424     <span class="keywordtype">double</span> e_err  = 0.0;
<a name="l01425"></a>01425     <span class="keywordtype">double</span> up_err = 0.0;
<a name="l01426"></a>01426     <span class="keywordtype">double</span> dtmp = 0.0;
<a name="l01427"></a>01427     <span class="keywordtype">double</span> v_azimuth = 0.0;
<a name="l01428"></a>01428 
<a name="l01429"></a>01429     <span class="keywordflow">if</span>( maxBufferLength &lt; 1024*8 )
<a name="l01430"></a>01430     {
<a name="l01431"></a>01431       nrBytesInBuffer = 0;
<a name="l01432"></a>01432       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01433"></a>01433     }
<a name="l01434"></a>01434     
<a name="l01435"></a>01435     scount += sprintf( buffer, <span class="stringliteral">"\n"</span>);
<a name="l01436"></a>01436     scount += sprintf( buffer+scount, <span class="stringliteral">"GPS_Week   GPS_TOW(s)   DayOfYear   UTC_Time\n"</span> );
<a name="l01437"></a>01437     scount += sprintf( buffer+scount, <span class="stringliteral">"    %4d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a> );
<a name="l01438"></a>01438     scount += sprintf( buffer+scount, <span class="stringliteral">"%13.3lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a> );
<a name="l01439"></a>01439     scount += sprintf( buffer+scount, <span class="stringliteral">"         %03d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#b39bb1d78baa052fd5556927f5b057d8" title="The number of days into the year (1-366) [days].">day_of_year</a> );
<a name="l01440"></a>01440     scount += sprintf( buffer+scount, <span class="stringliteral">"   %04d, %02d, %02d, %02d:%02d:%05.2lf\n"</span>, 
<a name="l01441"></a>01441       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#ece40e30bc0e1f15b8b29c5f4e99cbbe" title="Universal Time Coordinated [year].">utc_year</a>, 
<a name="l01442"></a>01442       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#5d17e50c8e672f8611282774b0f66d65" title="Universal Time Coordinated [1-12 months].">utc_month</a>,
<a name="l01443"></a>01443       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#a13768d7270c60cb17164e0c2fecf113" title="Universal Time Coordinated [1-31 days].">utc_day</a>,
<a name="l01444"></a>01444       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#3f9dea0603becbb6d8fde5b4a45ccffd" title="Universal Time Coordinated [hours].">utc_hour</a>,
<a name="l01445"></a>01445       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#4160098fdd8a209622f31abeef062121" title="Universal Time Coordinated [minutes].">utc_minute</a>,
<a name="l01446"></a>01446       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#9dde80d5b066a501ebcaa805d11d36a0" title="Universal Time Coordinated [s].">utc_seconds</a> );
<a name="l01447"></a>01447     scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );
<a name="l01448"></a>01448 
<a name="l01449"></a>01449     scount += sprintf( buffer+scount, <span class="stringliteral">"            Lat(deg)  Long(deg)  Height(m)         X(m)        Y(m)        Z(m)\n"</span>);
<a name="l01450"></a>01450     scount += sprintf( buffer+scount, <span class="stringliteral">"Estimated:%10.5f %10.5f %10.3f "</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#401611e17da6179e2aa38471e251247f" title="The user latitude [degrees].">latitudeDegs</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#af00fb82a346dbcd91e24a365ad351b9" title="The user longitude [degrees].">longitudeDegs</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1c8940c0284c37c083ae4d627c0e8ebf" title="The user orthometric height [m].">height</a> );    
<a name="l01451"></a>01451     scount += sprintf( buffer+scount, <span class="stringliteral">"%12.1lf %11.1lf %11.1lf\n"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#cd902db84bf399c50bdfa7937f1b9344" title="The user&amp;#39;s ECEF position, X [m].">x</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#78f74521a02cd816c012209b565af06d" title="The user&amp;#39;s ECEF position, Y [m].">y</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#84dfd5852ab0e4fbac90026b6fb9aaf7" title="The user&amp;#39;s ECEF position, Z [m].">z</a> );
<a name="l01452"></a>01452 
<a name="l01453"></a>01453     <span class="keywordflow">if</span>( referenceLatitude == 0 &amp;&amp; referenceLongitude == 0 &amp;&amp; referenceHeight == 0 )
<a name="l01454"></a>01454     {
<a name="l01455"></a>01455       x = y = z = 0;
<a name="l01456"></a>01456     }
<a name="l01457"></a>01457     <span class="keywordflow">else</span>
<a name="l01458"></a>01458     {
<a name="l01459"></a>01459       <a class="code" href="geodesy_8c.html#47075d6d68ed508277c77605d052dc16" title="This function converts curvilinear geodetic coordinates from latitude, longitude...">GEODESY_ConvertGeodeticCurvilinearToEarthFixedCartesianCoordinates</a>(
<a name="l01460"></a>01460         <a class="code" href="geodesy_8h.html#85892358ee81c1db6c2bdafffa2d282ce781aa9a001ff026b17367ff519a0deb" title="WGS84.">GEODESY_REFERENCE_ELLIPSE_WGS84</a>,
<a name="l01461"></a>01461         referenceLatitude,
<a name="l01462"></a>01462         referenceLongitude,
<a name="l01463"></a>01463         referenceHeight,
<a name="l01464"></a>01464         &amp;x, 
<a name="l01465"></a>01465         &amp;y,
<a name="l01466"></a>01466         &amp;z );
<a name="l01467"></a>01467     }
<a name="l01468"></a>01468 
<a name="l01469"></a>01469     scount += sprintf( buffer+scount, <span class="stringliteral">"Reference:%10.5f %10.5f %10.3f "</span>, referenceLatitude*<a class="code" href="constants_8h.html#c5a945020d3528355cda82d383676736" title="180.0/PI">RAD2DEG</a>, referenceLongitude*RAD2DEG, referenceHeight );      
<a name="l01470"></a>01470     scount += sprintf( buffer+scount, <span class="stringliteral">"%12.1lf %11.1lf %11.1lf\n"</span>, x, y, z );
<a name="l01471"></a>01471 
<a name="l01472"></a>01472     <span class="keywordflow">if</span>( x == 0 &amp;&amp; y == 0 &amp;&amp; z == 0 )
<a name="l01473"></a>01473     {
<a name="l01474"></a>01474       n_err = e_err = up_err = 0.0;
<a name="l01475"></a>01475     }
<a name="l01476"></a>01476     <span class="keywordflow">else</span>
<a name="l01477"></a>01477     {
<a name="l01478"></a>01478       <a class="code" href="geodesy_8c.html#b664109cc9edd99427ec9c141a42b6d9" title="Compute the difference between two points in a local geodetic frame using one point...">GEODESY_ComputePositionDifference</a>(
<a name="l01479"></a>01479         <a class="code" href="geodesy_8h.html#85892358ee81c1db6c2bdafffa2d282ce781aa9a001ff026b17367ff519a0deb" title="WGS84.">GEODESY_REFERENCE_ELLIPSE_WGS84</a>,
<a name="l01480"></a>01480         referenceLatitude,  
<a name="l01481"></a>01481         referenceLongitude, 
<a name="l01482"></a>01482         referenceHeight,    
<a name="l01483"></a>01483         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#89414daaadfb175b4f2dd61481a9d603" title="The user latitude [rad].">latitude</a>,
<a name="l01484"></a>01484         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#7edabfbb0ef7046ab0dcf5e4e44b3364" title="The user longitude [rad].">longitude</a>,
<a name="l01485"></a>01485         <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1c8940c0284c37c083ae4d627c0e8ebf" title="The user orthometric height [m].">height</a>,  
<a name="l01486"></a>01486         &amp;n_err,
<a name="l01487"></a>01487         &amp;e_err,
<a name="l01488"></a>01488         &amp;up_err
<a name="l01489"></a>01489         );
<a name="l01490"></a>01490     }
<a name="l01491"></a>01491  
<a name="l01492"></a>01492     scount += sprintf( buffer+scount, <span class="stringliteral">"Diff(m)  :"</span>);
<a name="l01493"></a>01493     <span class="keywordflow">if</span> (fabs(n_err) &lt; 1000)  scount += sprintf( buffer+scount, <span class="stringliteral">" %9.5f"</span>, n_err);
<a name="l01494"></a>01494     <span class="keywordflow">else</span>                     scount += sprintf( buffer+scount, <span class="stringliteral">"          "</span>);
<a name="l01495"></a>01495     <span class="keywordflow">if</span> (fabs(e_err) &lt; 1000)  scount += sprintf( buffer+scount, <span class="stringliteral">"  %9.5f"</span>, e_err);
<a name="l01496"></a>01496     <span class="keywordflow">else</span>                     scount += sprintf( buffer+scount, <span class="stringliteral">"           "</span>);
<a name="l01497"></a>01497     <span class="keywordflow">if</span> (fabs(up_err) &lt; 1000) scount += sprintf( buffer+scount, <span class="stringliteral">"  %9.3f\n\n"</span>, up_err );
<a name="l01498"></a>01498     <span class="keywordflow">else</span>                     scount += sprintf( buffer+scount, <span class="stringliteral">"           \n\n"</span>);
<a name="l01499"></a>01499 
<a name="l01500"></a>01500     scount += sprintf( buffer+scount, <span class="stringliteral">"East(m/s)      North(m/s)       Up(m/s)      Ground_Speed(km/h)    Azimuth(deg)\n"</span> );
<a name="l01501"></a>01501     dtmp = sqrt( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a>*<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a> + <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a>*<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a> )*3.6;
<a name="l01502"></a>01502     v_azimuth = atan2(<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a>);
<a name="l01503"></a>01503     scount += sprintf( buffer+scount, <span class="stringliteral">"%9.2lf %15.2lf %13.2lf %23.2lf %15.3lf\n"</span>, 
<a name="l01504"></a>01504       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ea06cbb1bbadeb4085c113d7baa89d45" title="The user&amp;#39;s local geodetic velocity, velocity North [m/s].">vn</a>,
<a name="l01505"></a>01505       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#3ddadc9e5fd7bc4a598871658097c964" title="The user&amp;#39;s local geodetic velocity, velocity East [m/s].">ve</a>,
<a name="l01506"></a>01506       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#5a83ebbee8c3fed5d9d8d7afcc5f78a6" title="The user&amp;#39;s local geodetic velocity, velocity Up [m/s].">vup</a>,
<a name="l01507"></a>01507       dtmp,
<a name="l01508"></a>01508       v_azimuth*RAD2DEG );      
<a name="l01509"></a>01509     scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );  
<a name="l01510"></a>01510 
<a name="l01511"></a>01511 
<a name="l01512"></a>01512     scount += sprintf( buffer+scount, <span class="stringliteral">"Nr: PSR  U / R  Doppler  U / R  ADR  U / R    HDOP   VDOP   PDOP   TDOP   GDOP\n"</span> );
<a name="l01513"></a>01513     scount += sprintf( buffer+scount, <span class="stringliteral">"    %3d%3d%4d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#e4ec2267360fa5b0d61e2414decded23" title="This indicates the number of valid pseudorange observations valid before adjustment...">nrPsrObsAvailable</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#dfbc2daf862c89582a0f5a52bd7ff553" title="This indicates the number of valid pseudorange observations valid after adjustment...">nrPsrObsUsed</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#2c45da935636cde9e839b2d55c87cb50" title="This indicates the number of valid pseudorange observations rejected during adjustment...">nrPsrObsRejected</a> ); 
<a name="l01514"></a>01514     scount += sprintf( buffer+scount, <span class="stringliteral">"%9d%3d%4d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#f1bc9f94b069c62c6fe11810e7812b97" title="This indicates the number of valid Doppler observations valid before adjustment.">nrDopplerObsAvailable</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ed793d070f2354caa66b3770e92d2866" title="This indicates the number of valid Doppler observations valid after adjustment.">nrDopplerObsUsed</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#ed4d1f349586bf9e172dfe1231d3cd3f" title="This indicates the number of valid Doppler observations rejected during adjustment...">nrDopplerObsRejected</a> ); 
<a name="l01515"></a>01515     scount += sprintf( buffer+scount, <span class="stringliteral">"%5d%3d%4d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#06fa191e6f651ac3d10f583843ef83dc" title="This indicates the number of valid ADR observations valid before adjustment.">nrAdrObsAvailable</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#59fe4451d580cddb077275957265a42b" title="This indicates the number of valid ADR observations valid after adjustment.">nrAdrObsUsed</a>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#2ff5bf00890ac41fc2faf41dba5ff4e8" title="This indicates the number of valid ADR observations rejected during adjustment.">nrAdrObsRejected</a> ); 
<a name="l01516"></a>01516     scount += sprintf( buffer+scount, <span class="stringliteral">"%8.1lf %6.1lf %6.1lf %6.1lf %6.1lf\n"</span>, 
<a name="l01517"></a>01517       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1ae0a10bc729f0c7b6f4683bbaf3b25b" title="All the associated DOP information for this solution.">dop</a>.<a class="code" href="struct_g_n_s_s__struct_d_o_p.html#d42a745ebcc11c5e5fb2cdb074f33d3a" title="horizontal dilution of precision [].">hdop</a>, 
<a name="l01518"></a>01518       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1ae0a10bc729f0c7b6f4683bbaf3b25b" title="All the associated DOP information for this solution.">dop</a>.<a class="code" href="struct_g_n_s_s__struct_d_o_p.html#aff2ab3ef341a86ab9bd24e9512f6cbc" title="vertical dilution of precision [].">vdop</a>, 
<a name="l01519"></a>01519       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1ae0a10bc729f0c7b6f4683bbaf3b25b" title="All the associated DOP information for this solution.">dop</a>.<a class="code" href="struct_g_n_s_s__struct_d_o_p.html#5b5a4c8edd7bf91e2b1af41311059c18" title="position dilution of precision [].">pdop</a>, 
<a name="l01520"></a>01520       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1ae0a10bc729f0c7b6f4683bbaf3b25b" title="All the associated DOP information for this solution.">dop</a>.<a class="code" href="struct_g_n_s_s__struct_d_o_p.html#151212e2f951b5b77ea3a435b20a6588" title="time dilution of precision [].">tdop</a>, 
<a name="l01521"></a>01521       <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#1ae0a10bc729f0c7b6f4683bbaf3b25b" title="All the associated DOP information for this solution.">dop</a>.<a class="code" href="struct_g_n_s_s__struct_d_o_p.html#f539e6afa1d2cb9d5c454ec74385b443" title="geometric dilution of precision [].">gdop</a> );
<a name="l01522"></a>01522     scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );  
<a name="l01523"></a>01523 
<a name="l01524"></a>01524     scount += sprintf( buffer+scount, <span class="stringliteral">"%2s"</span>, <span class="stringliteral">"CH"</span> );
<a name="l01525"></a>01525     scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"ID"</span> );
<a name="l01526"></a>01526     scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"S"</span> );
<a name="l01527"></a>01527     scount += sprintf( buffer+scount, <span class="stringliteral">"%13s"</span>, <span class="stringliteral">"PSR"</span> );
<a name="l01528"></a>01528     scount += sprintf( buffer+scount, <span class="stringliteral">"%2s"</span>, <span class="stringliteral">"U"</span> );
<a name="l01529"></a>01529     scount += sprintf( buffer+scount, <span class="stringliteral">"%9s"</span>, <span class="stringliteral">"DOPPLER"</span> );
<a name="l01530"></a>01530     scount += sprintf( buffer+scount, <span class="stringliteral">"%2s"</span>, <span class="stringliteral">"U"</span> );
<a name="l01531"></a>01531     scount += sprintf( buffer+scount, <span class="stringliteral">"%13s"</span>, <span class="stringliteral">"ADR"</span> );
<a name="l01532"></a>01532     scount += sprintf( buffer+scount, <span class="stringliteral">"%2s"</span>, <span class="stringliteral">"U"</span> );
<a name="l01533"></a>01533     scount += sprintf( buffer+scount, <span class="stringliteral">"%6s"</span>, <span class="stringliteral">"E"</span> );
<a name="l01534"></a>01534     scount += sprintf( buffer+scount, <span class="stringliteral">"%7s"</span>, <span class="stringliteral">"A"</span> );
<a name="l01535"></a>01535     scount += sprintf( buffer+scount, <span class="stringliteral">"%5s"</span>, <span class="stringliteral">"C/No"</span> );
<a name="l01536"></a>01536     scount += sprintf( buffer+scount, <span class="stringliteral">"%8s"</span>, <span class="stringliteral">"LOCK"</span> );
<a name="l01537"></a>01537     scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"SI"</span> );
<a name="l01538"></a>01538     scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );
<a name="l01539"></a>01539 
<a name="l01540"></a>01540     <span class="keywordflow">for</span>( i = 0; i &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; i++ )
<a name="l01541"></a>01541     {
<a name="l01542"></a>01542       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].flags.isActive &amp;&amp; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<a class="code" href="struct_g_n_s_s__struct_measurement.html#199091cdc428febb52547028670b27d4" title="The frequency type for this channel.">freqType</a> == GNSS_GPSL1)
<a name="l01543"></a>01543       {
<a name="l01544"></a>01544         scount += sprintf( buffer+scount, <span class="stringliteral">"%-2d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].channel );
<a name="l01545"></a>01545         scount += sprintf( buffer+scount, <span class="stringliteral">"%3d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].<span class="keywordtype">id</span> );
<a name="l01546"></a>01546         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == GNSS_GPS &amp;&amp; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == GNSS_GPSL1 )
<a name="l01547"></a>01547         {
<a name="l01548"></a>01548           scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"L1"</span> );
<a name="l01549"></a>01549         }
<a name="l01550"></a>01550         <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].system == GNSS_GPS &amp;&amp; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].freqType == GNSS_GPSL2 )
<a name="l01551"></a>01551         {
<a name="l01552"></a>01552           scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"L2"</span> );
<a name="l01553"></a>01553         }
<a name="l01554"></a>01554         <span class="keywordflow">else</span>
<a name="l01555"></a>01555         {
<a name="l01556"></a>01556           scount += sprintf( buffer+scount, <span class="stringliteral">"%3s"</span>, <span class="stringliteral">"--"</span> );
<a name="l01557"></a>01557         }
<a name="l01558"></a>01558         scount += sprintf( buffer+scount, <span class="stringliteral">"%13.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].psr );
<a name="l01559"></a>01559         scount += sprintf( buffer+scount, <span class="stringliteral">"%2d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].flags.isPsrUsedInSolution );
<a name="l01560"></a>01560 
<a name="l01561"></a>01561         scount += sprintf( buffer+scount, <span class="stringliteral">"%9.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].doppler );
<a name="l01562"></a>01562         scount += sprintf( buffer+scount, <span class="stringliteral">"%2d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].flags.isDopplerUsedInSolution );
<a name="l01563"></a>01563         
<a name="l01564"></a>01564         scount += sprintf( buffer+scount, <span class="stringliteral">"%13.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].adr );    
<a name="l01565"></a>01565         scount += sprintf( buffer+scount, <span class="stringliteral">"%2d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].flags.isAdrUsedInSolution );
<a name="l01566"></a>01566 
<a name="l01567"></a>01567         scount += sprintf( buffer+scount, <span class="stringliteral">"%6.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].satellite.elevation*RAD2DEG );
<a name="l01568"></a>01568         scount += sprintf( buffer+scount, <span class="stringliteral">"%7.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].satellite.azimuth*RAD2DEG );
<a name="l01569"></a>01569         scount += sprintf( buffer+scount, <span class="stringliteral">"%5.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].cno );
<a name="l01570"></a>01570         scount += sprintf( buffer+scount, <span class="stringliteral">"%8.1lf"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].locktime );
<a name="l01571"></a>01571         scount += sprintf( buffer+scount, <span class="stringliteral">"%3d"</span>, <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[i].index_ambiguity_state );
<a name="l01572"></a>01572         scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );
<a name="l01573"></a>01573       }
<a name="l01574"></a>01574     }  
<a name="l01575"></a>01575     scount += sprintf( buffer+scount, <span class="stringliteral">"\n"</span> );
<a name="l01576"></a>01576 
<a name="l01577"></a>01577     nrBytesInBuffer = scount;
<a name="l01578"></a>01578     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01579"></a>01579   }
<a name="l01580"></a>01580 
<a name="l01581"></a>01581 
<a name="l01582"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#30d948553428df79c2d763e9c3c9bb2b">01582</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#30d948553428df79c2d763e9c3c9bb2b" title="If a RINEX GPS Navigation file is associated with this receiver, load all the ephemeris...">GNSS_RxData::LoadRINEXNavigationData</a>(<span class="keywordtype">void</span>)
<a name="l01583"></a>01583   {
<a name="l01584"></a>01584     <span class="comment">// First estimate the size of the ephemeris array needed based on the number of lines</span>
<a name="l01585"></a>01585     <span class="comment">// in the data file after the header.</span>
<a name="l01586"></a>01586     <span class="keywordtype">unsigned</span> line_count = 0;
<a name="l01587"></a>01587     <span class="keywordtype">unsigned</span> estimated_nr_eph = 0;
<a name="l01588"></a>01588     <a class="code" href="basictypes_8h.html#050c65e107f0c828f856a231f4b4e788" title="The &amp;#39;c&amp;#39; boolean type is a define for (int). TRUE(0), FALSE(1).">BOOL</a> result = 0;
<a name="l01589"></a>01589 
<a name="l01590"></a>01590     FILE* fid = NULL;
<a name="l01591"></a>01591     fid = fopen( m_RINEX_eph.filepath.c_str(), <span class="stringliteral">"r"</span> );
<a name="l01592"></a>01592     <span class="keywordflow">if</span>( fid == NULL )
<a name="l01593"></a>01593       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01594"></a>01594 
<a name="l01595"></a>01595     <span class="comment">// Advance over the header.</span>
<a name="l01596"></a>01596     <span class="keywordflow">while</span>( !feof(fid) &amp;&amp; ferror(fid)==0 )
<a name="l01597"></a>01597     {
<a name="l01598"></a>01598       <span class="keywordflow">if</span>( fgets( (<span class="keywordtype">char</span>*)<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>, <a class="code" href="_g_n_s_s___rx_data_8h.html#ffae220d3e7c176f09ed25b09ba8bdff">GNSS_RXDATA_MSG_LENGTH</a>, fid ) == NULL )
<a name="l01599"></a>01599         <span class="keywordflow">break</span>;
<a name="l01600"></a>01600       <span class="keywordflow">if</span>( strstr( (<span class="keywordtype">char</span>*)m_message, <span class="stringliteral">"END OF HEADER"</span> ) != NULL )
<a name="l01601"></a>01601         <span class="keywordflow">break</span>;
<a name="l01602"></a>01602     }
<a name="l01603"></a>01603 
<a name="l01604"></a>01604     <span class="comment">// Count the number of lines in the remaining data.</span>
<a name="l01605"></a>01605     <span class="keywordflow">while</span>( !feof(fid) &amp;&amp; ferror(fid)==0 )
<a name="l01606"></a>01606     {
<a name="l01607"></a>01607       <span class="keywordflow">if</span>( fgets( (<span class="keywordtype">char</span>*)<a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#c9e3ac6996e70afb878e25b0415720db" title="A large message buffer.">m_message</a>, <a class="code" href="_g_n_s_s___rx_data_8h.html#ffae220d3e7c176f09ed25b09ba8bdff">GNSS_RXDATA_MSG_LENGTH</a>, fid ) == NULL )
<a name="l01608"></a>01608         <span class="keywordflow">break</span>;
<a name="l01609"></a>01609       line_count++;
<a name="l01610"></a>01610     }
<a name="l01611"></a>01611 
<a name="l01612"></a>01612     fclose(fid);
<a name="l01613"></a>01613 
<a name="l01614"></a>01614     <span class="comment">// There are 8 lines per ephemeris record generally.</span>
<a name="l01615"></a>01615     estimated_nr_eph = line_count/8;
<a name="l01616"></a>01616 
<a name="l01617"></a>01617     estimated_nr_eph += 32; <span class="comment">// for good measure.</span>
<a name="l01618"></a>01618 
<a name="l01619"></a>01619     <span class="comment">// Allocate enough memory for the ephemeris array.</span>
<a name="l01620"></a>01620     m_RINEX_eph.eph_array = NULL;
<a name="l01621"></a>01621     m_RINEX_eph.eph_array = <span class="keyword">new</span> <a class="code" href="struct_g_p_s__struct_ephemeris.html" title="A set of satellite orbit parameters that is used to calculate GPS satellite positions...">GPS_structEphemeris</a>[estimated_nr_eph];
<a name="l01622"></a>01622     <span class="keywordflow">if</span>( m_RINEX_eph.eph_array == NULL )
<a name="l01623"></a>01623       <span class="keywordflow">return</span> FALSE;
<a name="l01624"></a>01624     
<a name="l01625"></a>01625     m_RINEX_eph.max_array_length = estimated_nr_eph;
<a name="l01626"></a>01626     
<a name="l01627"></a>01627     result = <a class="code" href="rinex_8c.html#24b288267308763ab0a31b415b4c6f53" title="RINEX VERSION 2.11: Completely decode a RINEX GPS Navigation file into an array of...">RINEX_DecodeGPSNavigationFile</a>(
<a name="l01628"></a>01628       m_RINEX_eph.filepath.c_str(),
<a name="l01629"></a>01629       &amp;m_RINEX_eph.iono_model,
<a name="l01630"></a>01630       m_RINEX_eph.eph_array,
<a name="l01631"></a>01631       m_RINEX_eph.max_array_length,
<a name="l01632"></a>01632       &amp;m_RINEX_eph.array_length
<a name="l01633"></a>01633       );
<a name="l01634"></a>01634     <span class="keywordflow">if</span>( result == FALSE )
<a name="l01635"></a>01635       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01636"></a>01636 
<a name="l01637"></a>01637     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01638"></a>01638   }
<a name="l01639"></a>01639 
<a name="l01640"></a><a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#0c78cf924383bae9f04489502b972028">01640</a>   <span class="keywordtype">bool</span> <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#0c78cf924383bae9f04489502b972028" title="If a RINEX GPS Navigation file is associated with this receiver, Load m_EphAlmArray...">GNSS_RxData::UpdateTheEphemerisArrayWithUsingRINEX</a>()
<a name="l01641"></a>01641   {
<a name="l01642"></a>01642     <span class="keywordtype">int</span> RINEX_eph_index = -1;
<a name="l01643"></a>01643     <span class="keywordtype">unsigned</span> i = 0;
<a name="l01644"></a>01644     <span class="keywordtype">unsigned</span> j = 0;
<a name="l01645"></a>01645     <span class="keywordtype">unsigned</span> k = 0;
<a name="l01646"></a>01646     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> eph_week = 0;
<a name="l01647"></a>01647     <span class="keywordtype">unsigned</span> eph_tow = 0;
<a name="l01648"></a>01648     <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;
<a name="l01649"></a>01649     <span class="keywordtype">double</span> eph_time = 0;
<a name="l01650"></a>01650     <span class="keywordtype">double</span> current_eph_time = 0;
<a name="l01651"></a>01651     <span class="keyword">const</span> <span class="keywordtype">double</span> rx_time = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#70940cea1dfdda85d4d2c27cc2dfdbe7" title="The current GPS week associated with the observations [weeks].">gps_week</a>*<a class="code" href="constants_8h.html#7e7087a54da1e633ceb9057a83bcbbec" title="[s]">SECONDS_IN_WEEK</a> + <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#fa0c3f24f0bdfd7fbfc0dd9bce636945" title="The receiver&amp;#39;s position, velocity, and time information.">m_pvt</a>.<a class="code" href="struct_g_n_s_s__struct_p_v_t.html#0109a93005dac50d564c9a4349603c2d">time</a>.<a class="code" href="struct_g_n_s_s__struct_receiver_time.html#7a68558aebac6fe85493ab528424f2f4" title="The GPS time of week (0-604800.0) (receiver time of observation) [s].">gps_tow</a>;
<a name="l01652"></a>01652     <span class="keywordtype">bool</span> isEphUpToDate;
<a name="l01653"></a>01653     <span class="keywordtype">bool</span> isAvailable;
<a name="l01654"></a>01654 
<a name="l01655"></a>01655     <span class="comment">// GDM CONTINUE HERE</span>
<a name="l01656"></a>01656 
<a name="l01657"></a>01657     <span class="comment">/*</span>
<a name="l01658"></a>01658 <span class="comment">    - Only update thte active satellites</span>
<a name="l01659"></a>01659 <span class="comment">    - Update the ephemeris object as if the data is real time.</span>
<a name="l01660"></a>01660 <span class="comment">    - i.e. Not the best ephemeris but the most up to date.</span>
<a name="l01661"></a>01661 <span class="comment">    */</span>
<a name="l01662"></a>01662     <span class="keywordflow">for</span>( j = 0; j &lt; <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#741cbb48ed7e93330d5c20816917cbba" title="The number of usable items in m_ObsArray.">m_nrValidObs</a>; j++ )
<a name="l01663"></a>01663     {
<a name="l01664"></a>01664       RINEX_eph_index = -1; <span class="comment">// Not available.</span>
<a name="l01665"></a>01665       eph_time = 0;
<a name="l01666"></a>01666       current_eph_time = 0;
<a name="l01667"></a>01667       isEphUpToDate = <span class="keyword">false</span>;
<a name="l01668"></a>01668       isAvailable = <span class="keyword">false</span>;
<a name="l01669"></a>01669       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].flags.isActive )
<a name="l01670"></a>01670       {
<a name="l01671"></a>01671         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].system == GNSS_GPS )
<a name="l01672"></a>01672         {
<a name="l01673"></a>01673           <span class="comment">// Check if new ephemeris information is available. </span>
<a name="l01674"></a>01674           <span class="comment">// Process as if the data is real-time.</span>
<a name="l01675"></a>01675     
<a name="l01676"></a>01676           result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#f036d2626299c9d2e0e2223a4c2f0967" title="Try to get the week, and time of week of the most current ephemeris for the prn specified...">GetEphemerisTOW</a>(
<a name="l01677"></a>01677             <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].<span class="keywordtype">id</span>, 
<a name="l01678"></a>01678             isAvailable,
<a name="l01679"></a>01679             eph_week,
<a name="l01680"></a>01680             eph_tow
<a name="l01681"></a>01681             );
<a name="l01682"></a>01682           <span class="keywordflow">if</span>( !result )
<a name="l01683"></a>01683             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01684"></a>01684 
<a name="l01685"></a>01685           <span class="keywordflow">if</span>( isAvailable )
<a name="l01686"></a>01686           {
<a name="l01687"></a>01687             current_eph_time = eph_week*<a class="code" href="constants_8h.html#7e7087a54da1e633ceb9057a83bcbbec" title="[s]">SECONDS_IN_WEEK</a> + eph_tow;
<a name="l01688"></a>01688           }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690           <span class="comment">// Go through the entire ephemeris array. This algorihtms assumes</span>
<a name="l01691"></a>01691           <span class="comment">// the ephemeris records are increasing in time.</span>
<a name="l01692"></a>01692           <span class="keywordflow">for</span>( k = 0; k &lt; m_RINEX_eph.array_length; k++ )
<a name="l01693"></a>01693           {
<a name="l01694"></a>01694             <span class="keywordflow">if</span>( m_RINEX_eph.eph_array[k].prn == <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#e4367fe223cf9cac34e04403c482777f" title="The unique id for this channel (eg PRN for GPS).">id</a> )
<a name="l01695"></a>01695             {
<a name="l01696"></a>01696               eph_time = m_RINEX_eph.eph_array[k].tow_week*<a class="code" href="constants_8h.html#7e7087a54da1e633ceb9057a83bcbbec" title="[s]">SECONDS_IN_WEEK</a> + m_RINEX_eph.eph_array[k].tow;
<a name="l01697"></a>01697 
<a name="l01698"></a>01698               <span class="keywordflow">if</span>( !isAvailable )
<a name="l01699"></a>01699               {
<a name="l01700"></a>01700                 <span class="keywordflow">if</span>( rx_time &gt; eph_time )
<a name="l01701"></a>01701                 {
<a name="l01702"></a>01702                   RINEX_eph_index = k;
<a name="l01703"></a>01703                 }
<a name="l01704"></a>01704                 <span class="keywordflow">else</span>
<a name="l01705"></a>01705                 {
<a name="l01706"></a>01706                   <span class="keywordflow">if</span>( RINEX_eph_index &gt;= 0 )
<a name="l01707"></a>01707                   {
<a name="l01708"></a>01708                     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0" title="Add an ephemeris structure.">AddEphemeris</a>( 
<a name="l01709"></a>01709                       m_RINEX_eph.eph_array[RINEX_eph_index].prn, 
<a name="l01710"></a>01710                       m_RINEX_eph.eph_array[RINEX_eph_index]
<a name="l01711"></a>01711                     );
<a name="l01712"></a>01712                     <span class="keywordflow">if</span>( !result )
<a name="l01713"></a>01713                       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01714"></a>01714                     isEphUpToDate = <span class="keyword">true</span>;
<a name="l01715"></a>01715                     <span class="keywordflow">break</span>;
<a name="l01716"></a>01716                   }
<a name="l01717"></a>01717                   <span class="keywordflow">else</span>
<a name="l01718"></a>01718                   {
<a name="l01719"></a>01719                     <span class="comment">// There are no ephemeris records for this rx time yet.                    </span>
<a name="l01720"></a>01720                     <span class="keywordflow">break</span>;
<a name="l01721"></a>01721                   }                  
<a name="l01722"></a>01722                 }
<a name="l01723"></a>01723               }
<a name="l01724"></a>01724               <span class="keywordflow">else</span>
<a name="l01725"></a>01725               {
<a name="l01726"></a>01726                 <span class="keywordflow">if</span>( rx_time &gt; eph_time )
<a name="l01727"></a>01727                 {
<a name="l01728"></a>01728                   <span class="keywordflow">if</span>( current_eph_time &lt; eph_time )
<a name="l01729"></a>01729                   {
<a name="l01730"></a>01730                     RINEX_eph_index = k;
<a name="l01731"></a>01731                   }
<a name="l01732"></a>01732                 }
<a name="l01733"></a>01733                 <span class="keywordflow">else</span>
<a name="l01734"></a>01734                 {
<a name="l01735"></a>01735                   <span class="keywordflow">if</span>( RINEX_eph_index &gt;= 0 )
<a name="l01736"></a>01736                   {
<a name="l01737"></a>01737                     result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0" title="Add an ephemeris structure.">AddEphemeris</a>( 
<a name="l01738"></a>01738                       m_RINEX_eph.eph_array[RINEX_eph_index].prn, 
<a name="l01739"></a>01739                       m_RINEX_eph.eph_array[RINEX_eph_index]
<a name="l01740"></a>01740                     );
<a name="l01741"></a>01741                     <span class="keywordflow">if</span>( !result )
<a name="l01742"></a>01742                       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01743"></a>01743                     isEphUpToDate = <span class="keyword">true</span>;                    
<a name="l01744"></a>01744                   }
<a name="l01745"></a>01745                   <span class="keywordflow">break</span>;
<a name="l01746"></a>01746                 }
<a name="l01747"></a>01747               }
<a name="l01748"></a>01748             }
<a name="l01749"></a>01749           }
<a name="l01750"></a>01750 
<a name="l01751"></a>01751           <span class="comment">// Deal with end of file ephemeris records, no records are greater in time.</span>
<a name="l01752"></a>01752           <span class="keywordflow">if</span>( !isEphUpToDate )
<a name="l01753"></a>01753           {
<a name="l01754"></a>01754             <span class="keywordflow">if</span>( RINEX_eph_index &gt;= 0 )
<a name="l01755"></a>01755             {
<a name="l01756"></a>01756               result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#8b3f1a6b211bb87abebb6da0364f62d0" title="Add an ephemeris structure.">AddEphemeris</a>( 
<a name="l01757"></a>01757                 m_RINEX_eph.eph_array[RINEX_eph_index].prn, 
<a name="l01758"></a>01758                 m_RINEX_eph.eph_array[RINEX_eph_index]
<a name="l01759"></a>01759               );
<a name="l01760"></a>01760               <span class="keywordflow">if</span>( !result )
<a name="l01761"></a>01761                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01762"></a>01762               isEphUpToDate = <span class="keyword">true</span>;
<a name="l01763"></a>01763             }
<a name="l01764"></a>01764           }
<a name="l01765"></a>01765         }
<a name="l01766"></a>01766       }
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768 
<a name="l01769"></a>01769     <span class="comment">// Update the observation flags to indicate that ephemeris is available.</span>
<a name="l01770"></a>01770     <span class="keywordflow">for</span>( j = 0; j &lt; m_nrValidObs; j++ )
<a name="l01771"></a>01771     {
<a name="l01772"></a>01772       <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].flags.isActive )
<a name="l01773"></a>01773       {
<a name="l01774"></a>01774         <span class="keywordflow">if</span>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].system == GNSS_GPS )
<a name="l01775"></a>01775         {
<a name="l01776"></a>01776           result = <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#4acfaf2ee3d9dbb160cedc1845b17068">m_EphAlmArray</a>.<a class="code" href="class_g_n_s_s_1_1_g_p_s___broadcast_ephemeris_and_almanac_array.html#e1ebe924a0caf517716eb44ad3d13e6a" title="Check if ephemeris information is available for a PRN.">IsEphemerisAvailable</a>( <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].<span class="keywordtype">id</span>, isAvailable );
<a name="l01777"></a>01777           <span class="keywordflow">if</span>( !result )
<a name="l01778"></a>01778             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01779"></a>01779 
<a name="l01780"></a>01780           <a class="code" href="class_g_n_s_s_1_1_g_n_s_s___rx_data.html#86ea1c3a32c89c9cde7148b50005359d" title="The array of GNSS measurements.">m_ObsArray</a>[j].<a class="code" href="struct_g_n_s_s__struct_measurement.html#49b77c09463ec0af9674afc887d3a1bb" title="The flags associated with this channel. ie Validity flags, etc.">flags</a>.<a class="code" href="struct_g_n_s_s__struct_flags_bit_field.html#7c1ee49f4083b57c2b6b4b777155e544" title="Indicates if this channel has valid associated ephemeris information.">isEphemerisValid</a> = isAvailable;
<a name="l01781"></a>01781         }
<a name="l01782"></a>01782       }
<a name="l01783"></a>01783     }
<a name="l01784"></a>01784       
<a name="l01785"></a>01785     
<a name="l01786"></a>01786 
<a name="l01787"></a>01787     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01788"></a>01788   }
<a name="l01789"></a>01789 
<a name="l01790"></a>01790 
<a name="l01791"></a>01791 } <span class="comment">// end namespace GNSS</span>
<a name="l01792"></a>01792 
<a name="l01793"></a>01793 
<a name="l01794"></a>01794 
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Fri Dec 14 15:51:55 2007 for The Essential GNSS Project by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
